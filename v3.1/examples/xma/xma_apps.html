<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>XMA Examples for the Xilinx Video SDK &mdash; Xilinx Video SDK 3.1 (Production) documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=d2dc9114"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Specs and Features of the Xilinx Video SDK" href="../../specs_and_features.html" />
    <link rel="prev" title="GStreamer ABR Ladder Application" href="../gstreamer/xabrladder.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../index.html" class="icon icon-home"> Xilinx Video SDK
          </a>
              <div class="version">
                3.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started_on_prem.html">On Premises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started_on_vt1.html">Amazon EC2 VT1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container_setup.html">Container Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../examples.html">Tutorials and Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/tutorials.html">FFmpeg Introductory Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/filters.html">FFmpeg Software Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ffmpeg/quality_analysis.html">FFmpeg Video Quality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/tutorials.html">GStreamer Introductory Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/filters.html">GStreamer Software Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/quality_analysis.html">GStreamer Video Quality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/xcompositor.html">GStreamer Compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/xabrladder.html">GStreamer ABR Ladder</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">C-Based Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-setup">Environment Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-instructions">Build Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xma-decoder-app">XMA Decoder App</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#decoder-test-instructions">Decoder Test Instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#xma-encoder-app">XMA Encoder App</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#encoder-test-instructions">Encoder Test Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations-of-the-encoder-app">Limitations of the Encoder App</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#xma-scaler-app">XMA Scaler App</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scaler-test-instructions">Scaler Test Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations-of-the-scaler-app">Limitations of the Scaler App</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#xma-transcoder-app">XMA Transcoder App</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#transcoder-test-instructions">Transcoder Test Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations-of-the-transcoder-app">Limitations of the Transcoder App</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../specs_and_features.html">Specs and Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_ffmpeg.html">Using FFmpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_gstreamer.html">Using GStreamer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tuning_video_quality.html">Tuning Video Quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tuning_pipeline_latency.html">Tuning Transcode Latency</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../managing_compute_resources.html">Managing Compute Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploying_with_kubernetes.html">Deploying with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c_apis.html">C API Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../card_management.html">Card Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package_feed.html">Package Feed Setup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/video-sdk/issues">File an issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/video-sdk/browse.html">Other versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Xilinx Video SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../examples.html">Tutorials and Examples</a> &raquo;</li>
      <li>XMA Examples for the Xilinx Video SDK</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="xma-examples-for-the-sdk">
<h1>XMA Examples for the Xilinx Video SDK<a class="headerlink" href="#xma-examples-for-the-sdk" title="Link to this heading">Â¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#environment-setup" id="id1">Environment Setup</a></p></li>
<li><p><a class="reference internal" href="#build-instructions" id="id2">Build Instructions</a></p></li>
<li><p><a class="reference internal" href="#xma-decoder-app" id="id3">XMA Decoder App</a></p></li>
<li><p><a class="reference internal" href="#xma-encoder-app" id="id4">XMA Encoder App</a></p></li>
<li><p><a class="reference internal" href="#xma-scaler-app" id="id5">XMA Scaler App</a></p></li>
<li><p><a class="reference internal" href="#xma-transcoder-app" id="id6">XMA Transcoder App</a></p></li>
</ul>
</nav>
<p>The examples in the <code class="docutils literal notranslate"><span class="pre">/opt/examples/u30/xma</span></code> folder illustrate how C-based applications can natively interact with Xilinx devices using the Xilinx Video SDK plugins and the XMA (Xilinx Media Accelerator) APIs. The examples are for advanced use-cases where using the FFmpeg command-line interface is not appropriate.</p>
<p>Detailed documentation on the Xilinx Video SDK plugin interface and the XMA APIs can be found in the <a class="reference internal" href="../../c_apis.html"><span class="doc">C API Programming Guide</span></a> section of the documentation.</p>
<p class="rubric">Requirements</p>
<ul class="simple">
<li><p>The XMA applications has been built for and verified on Ubuntu 18.04, Ubuntu 20.04, RHEL 7.8 and AWS Linux V2.</p></li>
<li><p>The XMA applications only work with elementary streams. Container formats such as mp4 are not supported.</p></li>
</ul>
<section id="environment-setup">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Environment Setup</a><a class="headerlink" href="#environment-setup" title="Link to this heading">Â¶</a></h2>
<ol class="arabic">
<li><p>The Xilinx Video SDK examples can be found in the <code class="file docutils literal notranslate"><span class="pre">/opt/xilinx/examples/u30</span></code> folder of your system. If this folder is not present, first <a class="reference internal" href="../../package_feed.html#package-feed-configuration"><span class="std std-ref">make sure your package management client points to the remote package repository</span></a> for the Xilinx Video SDK. Then install the <code class="file docutils literal notranslate"><span class="pre">xilinx-alveo-u30-examples</span></code> package:</p>
<ul class="simple">
<li><p>Ubuntu</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get install xilinx-alveo-u30-example
</pre></div>
</div>
<ul class="simple">
<li><p>RHEL and Amazon Linux 2</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo yum install xilinx-alveo-u30-example
</pre></div>
</div>
</li>
<li><p>Configure the environment to use the Xilinx Video SDK:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /opt/xilinx/xcdr/setup.sh
</pre></div>
</div>
</li>
</ol>
<p>The setup script exports important environment variables, starts the Xilinx Resource Manager (XRM) daemon, and ensures that the Xilinx devices and the XRM plugins are properly loaded. It also moves to the top of the system PATH the FFmpeg binary provided as part of the Xilinx Video SDK.</p>
<p>Sourcing the setup script should be performed each time you open a new terminal on your system. This is required for the environment to be correctly configured.</p>
</section>
<section id="build-instructions">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Build Instructions</a><a class="headerlink" href="#build-instructions" title="Link to this heading">Â¶</a></h2>
<p class="rubric">Build</p>
<ol class="arabic">
<li><p>Create a local copy of the XMA examples:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cp -rp /opt/xilinx/examples/u30/xma xma_local
</pre></div>
</div>
</li>
<li><p>Switch to the local copy and build the examples:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd xma_local
make clean
make dev
</pre></div>
</div>
<p>The executables are placed in the <code class="docutils literal notranslate"><span class="pre">Debug/xma_apps/examples</span></code> directory.</p>
</li>
</ol>
<p class="rubric">Test</p>
<p>The <code class="docutils literal notranslate"><span class="pre">build_and_test.bash</span></code> script included with examples can be used to build and test all the XMA applications at once. This script sets up the environment, builds all the applications and then runs a simple test to validate that each of the applications works correctly. Run the script as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./build_and_test.bash
</pre></div>
</div>
<p>To test each application individually, refer to the sections below.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="xma-decoder-app">
<span id="xma-decoder-example"></span><h2><a class="toc-backref" href="#id3" role="doc-backlink">XMA Decoder App</a><a class="headerlink" href="#xma-decoder-app" title="Link to this heading">Â¶</a></h2>
<section id="decoder-test-instructions">
<h3>Decoder Test Instructions<a class="headerlink" href="#decoder-test-instructions" title="Link to this heading">Â¶</a></h3>
<p>The XMA decoder application supports most of the decode options supported by FFmpeg. The XMA decoder application supports only elementary H.264 or HEVC encoded bitstream and outputs YUV.</p>
<section id="decoder-usage">
<h4>Decoder Usage<a class="headerlink" href="#decoder-usage" title="Link to this heading">Â¶</a></h4>
<p>Before running decoding application, source the xcdr environment:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /opt/xilinx/xcdr/setup.sh
</pre></div>
</div>
<p>Running the decoder app with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option will print the complete list of options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_decode --help
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>This is a standalone xma decoder app. It ingests an h264 or h265
encoded file and utilizes hardware acceleration to get the decoded
output.

Usage:
	./Debug/u30_xma_decode [options] -i &lt;input-file&gt; -c:v &lt;codec-type&gt;
	[codec_options] -o &lt;output-file&gt;

Arguments:
	--help                     Print this message and exit
	-log &lt;level&gt;               Specify the log level
	-d &lt;device-id&gt;             Specify a device on which to run.
	                           Default: 0

Input Arguments:

	-stream_loop &lt;loop-count&gt;  Number of times to loop the input
	                           file
	-i &lt;input-file&gt;            Input file to be used

Codec Arguments:

	-c:v &lt;codec&gt;               Specify H264 or H265 decoding.
	                           (mpsoc_vcu_h264, mpsoc_vcu_hevc)
	-low_latency               Should low latency decoding be used
	-entropy_buf_cnt &lt;count&gt;   Specify number of internal entropy
	                           buffers. [2-10], default: 2
	-latency_logging           Log latency information to syslog
	-splitbuff_mode            Configure decoder in split/unsplit
	                           input buffer mode
	-frames &lt;frame-count&gt;      Number of frames to be processed.
	-pix_fmt fmt               The output format (nv12, yuv420p,
	                           yuv420p10le, xv15) Default: nv12 8 bit,
	                           yuv420p10le 10 bit
	-o &lt;file&gt;                  File to which output is written.

</pre></div>
</div>
</section>
<section id="sample-decoder-command">
<h4>Sample Decoder Command<a class="headerlink" href="#sample-decoder-command" title="Link to this heading">Â¶</a></h4>
<p>Decode an h264 encoded file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_decode  -i ~/CSGO_1920x1080_5000kbps.264 -c:v mpsoc_vcu_h264 -o ./CSGO_1920x1080.NV12
</pre></div>
</div>
<p>For more examples, refer to the <a class="reference external" href="https://github.com/Xilinx/video-sdk-u30-examples/blob/main/examples/u30/xma/decoder/test/scripts/decoder_app_test.sh">decoder/test/scripts/decoder_app_test.sh</a> script.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
</section>
<section id="xma-encoder-app">
<span id="xma-encoder-example"></span><h2><a class="toc-backref" href="#id4" role="doc-backlink">XMA Encoder App</a><a class="headerlink" href="#xma-encoder-app" title="Link to this heading">Â¶</a></h2>
<section id="encoder-test-instructions">
<h3>Encoder Test Instructions<a class="headerlink" href="#encoder-test-instructions" title="Link to this heading">Â¶</a></h3>
<p>The encoder XMA application supports most of the encoder options supported by FFmpeg. The XMA application supports only YUV 4:2:0 input and outputs H.264/HEVC encoded elementary stream.</p>
<section id="encoder-usage">
<h4>Encoder Usage<a class="headerlink" href="#encoder-usage" title="Link to this heading">Â¶</a></h4>
<p>Before running encoder application, source the xcdr environment:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /opt/xilinx/xcdr/setup.sh
</pre></div>
</div>
<p>Running the encoder app with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option will print the complete list of options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode --help
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> XMA Encoder App Usage:
	./program [input options] -i input-file -c:v &lt;codec-option&gt;  [encoder options] -o &lt;output-file&gt;

Arguments:

	--help                     Print this message and exit.
	-d &lt;device-id&gt;             Specify a device on which the encoder
	                           to run. Default: 0
	-frames &lt;frame-count&gt;      Number of frames to be processed.

Input options:

	-stream_loop &lt;loop-count&gt;  Number of times to loop the input YUV
	                           file.
	-w &lt;width&gt;                 Width of YUV input.
	-h &lt;height&gt;                Height of YUV input.
	-pix_fmt &lt;pixel-format&gt;    Pix format of the input file (yuv420p,
	                           nv12, yuv420p10le, xv15). Default: nv12
	-i &lt;input-file&gt;            Name and path of input YUV file

Codec option:
	-c:v &lt;codec&gt;               Encoder codec to be used. Supported
	                           are mpsoc_vcu_hevc, mpsoc_vcu_h264
Encoder params:
	-b:v &lt;bitrate&gt;             Bitrate can be given in Kbps or Mbps
	                           or bits i.e., 5000000, 5000K, 5M.
	                           Default is 200kbps
	-fps &lt;fps&gt;                 Input frame rate. Default is 25.
	-g &lt;intraperiod&gt;           Intra period. Default is 12.
	-control-rate &lt;mode&gt;       Rate control mode. Supported are 0
	                           to 3, default is 1.
	-max-bitrate &lt;bitrate&gt;     Maximum bit rate. Supported are 0 to
	                           350000000, default is 5000
	-slice-qp &lt;qp&gt;             Slice QP. Supported are -1 to 51,
	                           default is -1
	-min-qp &lt;qp&gt;               Minimum QP. Supported are 0 to 51,
	                           default is 0.
	-max-qp &lt;qp&gt;               Maximum QP. Supported values are 0
	                           to 51, default is 51.
	-bf &lt;frames&gt;               Number of B frames. Supported are 0
	                           to INT_MAX, default is 2.
	                           For GOP mode 0, supported are 0 to 4
	                           For GOP mode 1, supported 3, 5, 7, 15
	                           For GOP mode 2, no B frames.
	                           For GOP mode 3, supported are 0 to INT_MAX
	-dynamic-gop &lt;0/1&gt;         Disable (default) / enable dynamic gop.
	                           Automatically change B-frame
	                           structure based on motion vectors.
	                           Requires Lookahead_depth of at least 5.
	-periodicity-idr &lt;value&gt;   IDR picture frequency. Supported are
	                           0 to UINT32_MAX, default is
	                           UINT32_MAX.
	-force_key_frame &lt;value&gt;   Insert idr frame dynamically (Frame
	                           numbers starting from 0)
	                           Example: -force_key_frame &quot;(122,222,333)&quot;
	-profile &lt;value&gt;           Encoder profile.
	           For HEVC, supported are 0 or main, 1 or main-intra, 
	                           2 or main-10 and 3 or main-10-intra. 
	                           Default is 0/main.
	                           ENC_HEVC_MAIN - 0 or main.
	                           ENC_HEVC_MAIN_INTRA - 1 or main-intra.
	                           ENC_HEVC_MAIN_10 - 2 or main-10.
	                           ENC_HEVC_MAIN_10_INTRA - 3 or main-10-intra.
	           For H264, supported are 66 or baseline, 77 or main, 
	                           100 or high, 110 or high-10 and 
	                           2158 or high-10-intra. Default is 100
	                           ENC_H264_BASELINE - 66 or baseline.
	                           ENC_H264_MAIN - 77 or main.
	                           ENC_H264_HIGH - 100 or high.
	                           ENC_H264_HIGH_10 - 110 or high-10.
	                           ENC_H264_HIGH_10_INTRA - 2158 or high-10-intra.
	-level &lt;value&gt;             Encoder level.
	                           For HEVC, supported are 10, 11, 20,
	                           21, 30, 31, 40, 41, 50, 51.
	                           default is 10.
	                           For H264, supported are 10, 11, 12,
	                           13, 20, 21, 22, 30, 31, 32, 40, 41, 42,
	                           50, 51, 52.
	                           default is 10.
	-slices &lt;value&gt;            Number of slices per frame. Supported
	                           are 1 to 68, default is 1.
	-qp-mode &lt;mode&gt;            QP mode. Supported are 0, 1, and 2,
	                           default is 1.
	-aspect-ratio &lt;value&gt;      Aspect ratio. Supported values are 0
	                           to 3, default is 0.
	-scaling-list &lt;0/1&gt;        Scaling list. Enable/Disable,
	                           default enable.
	-lookahead-depth &lt;value&gt;   Lookahead depth. Supported are 0 to
	                           20, default is 0.
	-temporal-aq &lt;0/1&gt;         Temporal AQ. Enable/Disable,
	                           default disable.
	-spatial-aq &lt;0/1&gt;          Spatial AQ. Enable/Disable,
	                           default disable.
	-spatial-aq-gain &lt;value&gt;   Spatial AQ gain. Supported are 0 to
	                           100, default is 50.
	-cores &lt;value&gt;             Number of cores to use, supported are
	                           0 to 4, default is 0.
	-tune-metrics &lt;0/1&gt;        Tunes MPSoC H.264/HEVC encoder&#39;s video
	                           quality for objective metrics, default
	                           disable.
	-latency_logging &lt;0/1&gt;     Enable latency logging in syslog.
	-disable-pipeline &lt;0/1&gt;    Disable pipelining for encoder. 
	                           Serializes encoding (does not affect lookahead).
	-avc-lowlat &lt;0/1&gt;          Enable AVC low latency flag for 
	                           H264 to run on multiple cores incase  of pipeline disabled.
	-expert-options &lt;string&gt;   Expert options for the encoder, stored
	                           as string of key=value pairs.
	                           dynamic-params=&lt;params_file&gt;
	-o &lt;file&gt;                  File to which output is written.

</pre></div>
</div>
</section>
<section id="sample-encoder-commands">
<h4>Sample Encoder Commands<a class="headerlink" href="#sample-encoder-commands" title="Link to this heading">Â¶</a></h4>
<p>H.264 encoding, ultra low latency - high density, for resolutions up to 1080p60 (Consult the <a class="reference internal" href="../../tuning_pipeline_latency.html#latency-tuning"><span class="std std-ref">Tuning Transcode Latency</span></a> section for more details):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 1920 -h 1080  -i input_1080.yuv -c:v mpsoc_vcu_h264 -fps 60 -b:v 5000 -profile 2 -level 42 -g 120 -periodicity-idr 120 -qp-mode 0 -scaling-list 0 -bf 0 -disable-pipeline 1 -avc-lowlat 0 -o out1.264
</pre></div>
</div>
<p>H.264 encoding, ultra low latency - low density, for resolutions up to 4kp60 (Consult the <a class="reference internal" href="../../tuning_pipeline_latency.html#latency-tuning"><span class="std std-ref">Tuning Transcode Latency</span></a> section for more details):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 3840 -h 2160  -i input_4k.yuv -c:v mpsoc_vcu_h264 -fps 60 -b:v 12000 -profile 2 -level 42 -g 120 -periodicity-idr 120 -qp-mode 0 -scaling-list 0 -bf 0 -disable-pipeline 1 -avc-lowlat 1 -o out1.264
</pre></div>
</div>
<p>H.264 encoding, best objective score, low latency:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 1920 -h 1080  -i input_1080.yuv -c:v mpsoc_vcu_h264 -fps 60 -b:v 5000 -profile 2 -level 42 -g 120 -periodicity-idr 120 -qp-mode 0 -scaling-list 0 -bf 0 -o out1.264
</pre></div>
</div>
<p>H.264 encoding, best visual score, low latency:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 1920 -h 1080  -i input_1080.yuv -c:v mpsoc_vcu_h264 -fps 60 -b:v 5000 -profile 2 -level 42 -g 120 -periodicity-idr 120 -qp-mode 1 -bf 0 -o out2.264
</pre></div>
</div>
<p>H.264 encoding, using dynamic encoder paramters:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 1920 -h 1080 -pix_fmt yuv420p -i input_1080.yuv -fps 60 -g 120 -periodicity-idr 120 -frames 600 -c:v mpsoc_vcu_h264 -expert-options dynamic-params=cmdfile.txt -lookahead-depth 20 -spatial-aq 1 -temporal-aq 1 -spatial-aq-gain 80 -o out3.264
</pre></div>
</div>
<p>HEVC encoding, ultra low latency:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 1920 -h 1080  -i input_1080.yuv -c:v mpsoc_vcu_hevc -fps 60 -b:v 4000 -g 120 -periodicity-idr 120 -qp-mode 1 -bf 0 -disable-pipeline 1 -o out1.265
</pre></div>
</div>
<p>HEVC encoding, best visual score, low latency:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 1920 -h 1080  -i input_1080.yuv -c:v mpsoc_vcu_hevc -fps 60 -b:v 4000 -g 120 -periodicity-idr 120 -qp-mode 1 -bf 0 -o out1.265
</pre></div>
</div>
<p>HEVC encoding, best visual score, normal latency:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 1920 -h 1080  -i input_1080.yuv -c:v mpsoc_vcu_hevc -fps 60 -b:v 4000 -g 120 -periodicity-idr 120 -qp-mode 3 -bf 1 -lookahead-depth 20 -temporal-aq 1 -spatial-aq 1 -o out2.265
</pre></div>
</div>
<p>HEVC encoding, using dynamic encoder paramters:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_encode -w 1920 -h 1080 -pix_fmt yuv420p -i input_1080.yuv -fps 60 -g 120 -periodicity-idr 120 -frames 600 -c:v mpsoc_vcu_hevc -expert-options dynamic-params=cmdfile.txt -lookahead-depth 20 -spatial-aq 1 -temporal-aq 1 -spatial-aq-gain 80 -o out3.265
</pre></div>
</div>
<p>For more examples, refer to the <a class="reference external" href="https://github.com/Xilinx/video-sdk-u30-examples/blob/main/examples/u30/xma/encoder/test/scripts/encoder_app_test.sh">encoder/test/scripts/encoder_app_test.sh</a> script.</p>
</section>
<section id="dynamic-params-config-file-format-for-the-encoder-app">
<h4>Dynamic params config file format for the Encoder app<a class="headerlink" href="#dynamic-params-config-file-format-for-the-encoder-app" title="Link to this heading">Â¶</a></h4>
<p>The config text file should have dynamic parameters for a frame on each line. It can have single parameter or multiple parameters for a frame on each line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;frameNumberN1&gt;:&lt;key1&gt;=&lt;value1&gt;
&lt;frameNumberN2&gt;:&lt;key2&gt;=&lt;value2&gt;,&lt;key3&gt;=&lt;value3&gt;
</pre></div>
</div>
<p><strong>Keys allowed with their range of values</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Dynamic Parameter</p></th>
<th class="head"><p>Key</p></th>
<th class="head"><p>Valid Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Number of B frames</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NumB=&lt;int&gt;</span></code></p></td>
<td><p>0 to 4</p></td>
</tr>
<tr class="row-odd"><td><p>Bitrate (in bits per second)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BR=&lt;int&gt;</span></code></p></td>
<td><p>1K to INT_MAX</p></td>
</tr>
<tr class="row-even"><td><p>Temporal AQ mode</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tAQ=&lt;int&gt;</span></code></p></td>
<td><p>0 to 1</p></td>
</tr>
<tr class="row-odd"><td><p>Spatial AQ mode</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sAQ=&lt;int&gt;</span></code></p></td>
<td><p>0 to 1</p></td>
</tr>
<tr class="row-even"><td><p>Spatial AQ gain</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sAQGain=&lt;int&gt;</span></code></p></td>
<td><p>0 to 100</p></td>
</tr>
</tbody>
</table>
<p><strong>Sample dynamic params config file contents</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>300:NumB=1
600:BR=6000000
1200:sAQ=1,sAQGain=50
1800:tAQ=1
2400:NumB=0,BR=10000000,sAQ=0,sAQGain=50,tAQ=0
</pre></div>
</div>
</section>
</section>
<section id="limitations-of-the-encoder-app">
<h3>Limitations of the Encoder App<a class="headerlink" href="#limitations-of-the-encoder-app" title="Link to this heading">Â¶</a></h3>
<ul class="simple">
<li><p>The encoder application supports only yuv 420 8-bit or 10-bit.</p></li>
<li><p>The application outputs only H264/HEVC elementary streams.</p></li>
<li><p>The application supports multi-process but not multi-channel.</p></li>
<li><p>The dynamic params config file has a restricted format. Please check above sample config file format.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="xma-scaler-app">
<span id="xma-scaler-example"></span><h2><a class="toc-backref" href="#id5" role="doc-backlink">XMA Scaler App</a><a class="headerlink" href="#xma-scaler-app" title="Link to this heading">Â¶</a></h2>
<section id="scaler-test-instructions">
<h3>Scaler Test Instructions<a class="headerlink" href="#scaler-test-instructions" title="Link to this heading">Â¶</a></h3>
<p>The scaler XMA application supports most of the scaler options supported by FFmpeg. The XMA application supports only YUV 4:2:0 input and outputs YUV 4:2:0 scaled elementary stream.</p>
<section id="scaler-usage">
<h4>Scaler Usage<a class="headerlink" href="#scaler-usage" title="Link to this heading">Â¶</a></h4>
<p>Before running scaler application, source the xcdr environment:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /opt/xilinx/xcdr/setup.sh
</pre></div>
</div>
<p>Running the scaler app with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option will print the complete list of options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_scale --help
</pre></div>
</div>
<p>Below is the list of all the options of the scaler app:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>This program ingests an nv12, yuv420p, yuv420p10le, or xv15 input
file and utilizes hardware acceleration to scale to various resolutions.

Usage:
	./Debug/u30_xma_scale [options] -w &lt;input-width&gt; -h &lt;input-height&gt; -i
	&lt;input-file&gt; [scaler_options] -w &lt;output-1-width&gt; -h
	&lt;output-1-height&gt; -o &lt;output-1-file&gt; -w ...

Arguments:
	--help                     Print this message and exit
	-log &lt;level&gt;               Specify the log level
	-d &lt;device-id&gt;             Specify a device on which to run.
	                           Default: 0

Input Arguments:

	-stream_loop &lt;loop-count&gt;  Number of times to loop the input
	                           file
	-w &lt;width&gt;                 Specify the input&#39;s width
	-h &lt;height&gt;                Specify the input&#39;s height
	-pix_fmt &lt;pixel-format&gt;    Pixel format of the input file (nv12,
	                           xv15, yuv420p10le). Default : nv12.
	-fps &lt;frame-rate&gt;          Frame rate. Used for scaler load
	                           calculation.
	-i &lt;input-file&gt;            Input file to be used

Output Arguments:
	-coeff_load &lt;load&gt;         Specify the coefficient load. 0 Auto
	                           (default), 1 static, 2 FilterCoef.txt.
	-enable_pipeline           Enable scaler pipeline. Default disabled (0)
	-rate &lt;half/full&gt;          Set the rate to half. Half rate drops
	                           frames to reduce resource usage.
	                           Default: full.
	-enable-latency-logging    Enable latency logging
	-w &lt;width&gt;                 Specify the output&#39;s width
	-h &lt;height&gt;                Specify the output&#39;s height
	-pix_fmt &lt;pixel-format&gt;    Pixel format of the output file (nv12,
	                           xv15, yuv420p10le). Default: input fmt
	-frames &lt;frame-count&gt;      Number of frames to be processed.
	-o &lt;file&gt;                  File to which output is written.

</pre></div>
</div>
</section>
<section id="sample-scaler-command">
<h4>Sample Scaler Command<a class="headerlink" href="#sample-scaler-command" title="Link to this heading">Â¶</a></h4>
<p>Scale 1080p nv12 to 720p, 480p, 360p, and 240p nv12:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_scale -w 1920 -h 1080 -i ~/Kimono1_1920x1080_24.yuvNV12 -w 1280 -h \
      720 -o Kimono_1280x720.NV12 -w 852 -h 480 -o Kimono_852x480.NV12 -w \
      640 -h 360 -o Kimono_640x360.NV12 -w 480 -h 240 -o Kimono_480x240.NV12
</pre></div>
</div>
<p>For more examples, refer to the <a class="reference external" href="https://github.com/Xilinx/video-sdk-u30-examples/blob/main/examples/u30/xma/scaler/test/scripts/scaler_app_test.sh">scaler/test/scripts/scaler_app_test.sh</a> script.</p>
</section>
</section>
<section id="limitations-of-the-scaler-app">
<h3>Limitations of the Scaler App<a class="headerlink" href="#limitations-of-the-scaler-app" title="Link to this heading">Â¶</a></h3>
<ul class="simple">
<li><p>There may be a performance degradation relative to ffmpeg with a high number of outputs/processes.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="xma-transcoder-app">
<span id="xma-transcoder-example"></span><h2><a class="toc-backref" href="#id6" role="doc-backlink">XMA Transcoder App</a><a class="headerlink" href="#xma-transcoder-app" title="Link to this heading">Â¶</a></h2>
<section id="transcoder-test-instructions">
<h3>Transcoder Test Instructions<a class="headerlink" href="#transcoder-test-instructions" title="Link to this heading">Â¶</a></h3>
<p>The transcoder XMA application supports most of the options supported by ffmpeg. The XMA application supports only elementary H.264 and HEVC encoded stream input and outputs H.264/HEVC encoded elementary stream.</p>
<section id="transcoder-usage">
<h4>Transcoder Usage<a class="headerlink" href="#transcoder-usage" title="Link to this heading">Â¶</a></h4>
<p>Before running transcoder application, source the xcdr environment:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /opt/xilinx/xcdr/setup.sh
</pre></div>
</div>
<p>Running the transcoder app with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option will print the complete list of options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./u30_xma_transcode --help
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> XMA Transcoder App Usage:
	./program [generic options] -c:v &lt;decoder codec&gt; [decoder options]  -i input-file -multiscale_xma -outputs [num] [Scaler options]  -c:v &lt;encoder codec&gt; [encoder options] -o &lt;output-file&gt;  -c:v &lt;encoder codec&gt; [encoder options] -o &lt;output-file&gt;  -c:v &lt;encoder codec&gt; [encoder options] -o &lt;output-file&gt;.....

Arguments:

	--help                     Print this message and exit.
	-d &lt;device-id&gt;             Specify a device on which the
	                           transcoder to run. Default: 0
	-stream_loop &lt;loop-count&gt;  Number of times to loop the input file
	-frames &lt;frame-count&gt;      Number of input frames to be processed
	
Decoder options:

	-c:v &lt;codec&gt;               Decoder codec to be used. Supported
	                           are mpsoc_vcu_hevc, mpsoc_vcu_h264
	-dl &lt;device-id&gt;            Specify device on which decoder should run
	-low-latency &lt;0/1&gt;         Low latency for decoder. Default
	                           disabled
	-latency_logging &lt;0/1&gt;     Latency logging for decoder. Default
	                           disabled
	-i &lt;input-file&gt;            Name and path of input H.264/HEVC file
	
Scaler options:

	-multiscale_xma            Name of the ABR scaler filter
	-num-output &lt;value&gt;        Number of output files from scaler
	-xvbm_convert              Convert the scaler&#39;s input into a host buffer.
	                           Useful when running scaler on a different device.
	-dl &lt;device-id&gt;            Specify device on which scaler should run
	-enable_pipeline           Enable/disable pipelining in the scaler. Default disabled (0)
	-out_1_width &lt;width&gt;       Width of the scaler output channel 1
	-out_1_height &lt;height&gt;     Height of the scaler output channel 1
	-out_1_rate &lt;full/half&gt;    Full of Half rate for output channel 1
	-out_2_width &lt;width&gt;       Width of the scaler output channel 2
	-out_2_height &lt;height&gt;     Height of the scaler output channel 2
	-out_2_rate &lt;full/half&gt;    Full of Half rate for output channel 2
	-out_3_width &lt;width&gt;       Width of the scaler output channel 3
	-out_3_height &lt;height&gt;     Height of the scaler output channel 3
	-out_3_rate &lt;full/half&gt;    Full of Half rate for output channel 3
	-out_4_width &lt;width&gt;       Width of the scaler output channel 4
	-out_4_height &lt;height&gt;     Height of the scaler output channel 4
	-out_4_rate &lt;full/half&gt;    Full of Half rate for output channel 4
	-out_5_width &lt;width&gt;       Width of the scaler output channel 5
	-out_5_height &lt;height&gt;     Height of the scaler output channel 5
	-out_5_rate &lt;full/half&gt;    Full of Half rate for output channel 5
	-out_6_width &lt;width&gt;       Width of the scaler output channel 6
	-out_6_height &lt;height&gt;     Height of the scaler output channel 6
	-out_6_rate &lt;full/half&gt;    Full of Half rate for output channel 6
	-out_7_width &lt;width&gt;       Width of the scaler output channel 7
	-out_7_height &lt;height&gt;     Height of the scaler output channel 7
	-out_7_rate &lt;full/half&gt;    Full of Half rate for output channel 7
	-out_8_width &lt;width&gt;       Width of the scaler output channel 8
	-out_8_height &lt;height&gt;     Height of the scaler output channel 8
	-out_8_rate &lt;full/half&gt;    Full of Half rate for output channel 8
	-latency_logging &lt;0/1&gt;     Latency logging for scaler. Default
	                           disabled
Encoder options:

	-c:v &lt;codec&gt;               Encoder codec to be used. Supported
	                           are mpsoc_vcu_hevc, mpsoc_vcu_h264
	-dl &lt;device-id&gt;            Specify device on which encoder should run
	-b:v &lt;bitrate&gt;             Bitrate can be given in Kbps or Mbps
	                           or bits i.e., 5000000, 5000K, 5M.
	                           Default is 200kbps
	-fps &lt;fps&gt;                 Input frame rate. Default is 25.
	-g &lt;intraperiod&gt;           Intra period. Default is 12.
	-control-rate &lt;mode&gt;       Rate control mode. Supported are 0
	                           to 3, default is 1.
	-max-bitrate &lt;bitrate&gt;     Maximum bit rate. Supported are 0 to
	                           350000000, default is 5000
	-slice-qp &lt;qp&gt;             Slice QP. Supported are -1 to 51,
	                           default is -1
	-min-qp &lt;qp&gt;               Minimum QP. Supported are 0 to 51,
	                           default is 0.
	-max-qp &lt;qp&gt;               Maximum QP. Supported values are 0
	                           to 51, default is 51.
	-bf &lt;frames&gt;               Number of B frames. Supported are 0
	                           to INT_MAX, default is 2.
	                           For GOP mode 0, supported are 0 to 4
	                           For GOP mode 1, supported 3, 5, 7, 15
	                           For GOP mode 2, no B frames.
	                           For GOP mode 3, supported are 0 to INT_MAX
	-dynamic-gop &lt;0/1&gt;         Disable (default) / enable dynamic gop.
	                           Automatically change B-frame
	                           structure based on motion vectors.
	                           Requires Lookahead_depth of at least 5.
	-periodicity-idr &lt;value&gt;   IDR picture frequency. Supported are
	                           0 to UINT32_MAX, default is
	                           UINT32_MAX.
	-force_key_frame &lt;value&gt;   Insert idr frame dynamically  (Frame
	                           numbers starting from 0)
	                           Example: -force_key_frame &quot;(122,222,333)&quot;
	-profile &lt;value&gt;           Encoder profile.
	           For HEVC, supported are 0 or main, 1 or main-intra,
	                           2 or main-10 and 3 or main-10-intra.
	                           Default is 0/main.
	                           ENC_HEVC_MAIN - 0 or main.
	                           ENC_HEVC_MAIN_INTRA - 1 or main-intra.
	                           ENC_HEVC_MAIN_10 - 2 or main-10.
	                           ENC_HEVC_MAIN_10_INTRA - 3 or main-10-intra.
	           For H264, supported are 66 or baseline, 77 or main,
	                           100 or high, 110 or high-10 and
	                           2158 or high-10-intra. Default is 100
	                           ENC_H264_BASELINE - 66 or baseline.
	                           ENC_H264_MAIN - 77 or main.
	                           ENC_H264_HIGH - 100 or high.
	                           ENC_H264_HIGH_10 - 110 or high-10.
	                           ENC_H264_HIGH_10_INTRA - 2158 or high-10-intra.
	-level &lt;value&gt;             Encoder level.
	                           For HEVC, supported are 10, 11, 20,
	                           21, 30, 31, 40, 41, 50, 51.
	                           default is 10.
	                           For H264, supported are 10, 11, 12,
	                           13, 20, 21, 22, 30, 31, 32, 40, 41, 42, 50, 51, 52.
	                           default is 10.
	-slices &lt;value&gt;            Number of slices per frame. Supported
	                           are 1 to 68, default is 1.
	-qp-mode &lt;mode&gt;            QP mode. Supported are 0, 1, and 2,
	                           default is 1.
	-aspect-ratio &lt;value&gt;      Aspect ratio. Supported values are 0
	                           to 3, default is 0.
	-scaling-list &lt;0/1&gt;        Scaling list. Enable/Disable,
	                           default enable.
	-lookahead-depth &lt;value&gt;   Lookahead depth. Supported are 0 to
	                           20, default is 0.
	-temporal-aq &lt;0/1&gt;         Temporal AQ. Enable/Disable,
	                           default disable.
	-spatial-aq &lt;0/1&gt;          Spatial AQ. Enable/Disable,
	                           default disable.
	-spatial-aq-gain &lt;value&gt;   Spatial AQ gain. Supported are 0 to
	                           100, default is 50.
	-cores &lt;value&gt;             Number of cores to use, supported are
	                           0 to 4, default is 0.
	-tune-metrics &lt;0/1&gt;        Tunes MPSoC H.264/HEVC encoder&#39;s video
	                           quality for objective metrics, default
	                           disable.
	-latency_logging &lt;0/1&gt;     Enable latency logging in syslog.
	-disable-pipeline &lt;0/1&gt;    Disable pipelining for encoder.
	                           Serializes encoding (does not affect lookahead).
	-expert-options &lt;string&gt;   Expert options for the encoder, stored as
	                           string of key=value pairs.
	                           dynamic-params=&lt;params_file&gt;
	-o &lt;file&gt;                  File to which output is written.

</pre></div>
</div>
</section>
<section id="sample-transcoder-commands">
<h4>Sample Transcoder Commands<a class="headerlink" href="#sample-transcoder-commands" title="Link to this heading">Â¶</a></h4>
<p>Ultra Low Latecy H.264 to HEVC Transcoder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_transcode -c:v mpsoc_vcu_h264 -low-latency 1 -i input_1080p.264 -c:v mpsoc_vcu_hevc -bf 0 -disable-pipeline 1 -latency_logging 1 -o out_ull.h265
</pre></div>
</div>
<p>H.264 to HEVC ABR Transcoder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_transcode -c:v mpsoc_vcu_h264 -i input_1080p.264 -multiscale_xma -num-output 4 -out_1_width 1280 -out_1_height 720 -out_2_width 848 -out_2_height 480 -out_3_width 640 -out_3_height 360 -out_4_width 288 -out_4_height 160 \
-c:v mpsoc_vcu_hevc -b:v 4000K  -o out1_test1.265 -c:v mpsoc_vcu_hevc -b:v 3000K -o out1_test2.265 -c:v mpsoc_vcu_hevc -b:v 2500K -o out1_test3.265 -c:v mpsoc_vcu_hevc -b:v 1250K -o out1_test4.265 -c:v mpsoc_vcu_hevc -b:v 625K -o out1_test5.265
</pre></div>
</div>
<p>HEVC ABR Transcoder with Look-Ahead:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_transcode -c:v mpsoc_vcu_hevc -i input_1080p.265 -multiscale_xma -num-output 4 -out_1_width 1280 -out_1_height 720 -out_2_width 848 -out_2_height 480 -out_3_width 640 -out_3_height 360 -out_4_width 288 -out_4_height 160 \
-c:v mpsoc_vcu_hevc -b:v 4000K -qp-mode 3 -lookahead-depth 16 -temporal-aq 1 -spatial-aq 1 -spatial-aq-gain 75 -o out_la_test1.265 -c:v mpsoc_vcu_hevc -b:v 3000K -qp-mode 3 -lookahead-depth 16 -temporal-aq 1 -spatial-aq 1 -spatial-aq-gain 75 -o out_la_test2.265 \
-c:v mpsoc_vcu_hevc -b:v 2500K -qp-mode 3 -lookahead-depth 16 -temporal-aq 1 -spatial-aq 1 -spatial-aq-gain 75 -o out_la_test3.265 -c:v mpsoc_vcu_hevc -b:v 1250K -qp-mode 3 -lookahead-depth 16 -temporal-aq 1 -spatial-aq 1 -spatial-aq-gain 75 -o out_la_test4.265 \
-c:v mpsoc_vcu_hevc -b:v 625K -qp-mode 3 -lookahead-depth 16 -temporal-aq 1 -spatial-aq 1 -spatial-aq-gain 75 -o out_la_test5.265
</pre></div>
</div>
<p>H.264 to HEVC ABR Transcoder with Scaler Pipeline:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_transcode -c:v mpsoc_vcu_h264 -i input_1080p.264 -multiscale_xma -num-output 4 -out_1_width 1280 -out_1_height 720 -out_2_width 848 -out_2_height 480 -out_3_width 640 -out_3_height 360 -out_4_width 288 -out_4_height 160 \
-c:v mpsoc_vcu_hevc -b:v 4000K  -o out3_sc_test1.265 -c:v mpsoc_vcu_hevc -b:v 3000K -o out3_sc_test2.265 -c:v mpsoc_vcu_hevc -b:v 2500K -o out3_sc_test3.265 -c:v mpsoc_vcu_hevc -b:v 1250K -o out3_sc_test4.265 -c:v mpsoc_vcu_hevc -b:v 625K -o out3_sc_test5.265
</pre></div>
</div>
<p>H.264 ABR Transcoder with dynamic encoder parameters:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u30_xma_transcode -c:v mpsoc_vcu_h264 -i sample.h264 -multiscale_xma -num-output 2 -out_1_width 1280 -out_1_height 720 -out_2_width 848 \
-c:v mpsoc_vcu_h264 -b:v 4000K -expert-options dynamic-params=cmdfile.txt -qp-mode 2 -lookahead-depth 16 -temporal-aq 1 -spatial-aq 1 -spatial-aq-gain 75 -o out_dp_test1.h264 \
-c:v mpsoc_vcu_h264 -b:v 3000K -expert-options dynamic-params=cmdfile.txt -qp-mode 2 -lookahead-depth 16 -temporal-aq 1 -spatial-aq 1 -spatial-aq-gain 75 -o out_dp_test2.h264
</pre></div>
</div>
<p>For more examples, refer to the <a class="reference external" href="https://github.com/Xilinx/video-sdk-u30-examples/blob/main/examples/u30/xma/transcoder/test/scripts/transcoder_app_test.sh">transcoder/test/scripts/transcoder_app_test.sh</a> script.</p>
</section>
<section id="dynamic-params-config-file-format-for-the-transcoder-app">
<h4>Dynamic params config file format for the Transcoder app<a class="headerlink" href="#dynamic-params-config-file-format-for-the-transcoder-app" title="Link to this heading">Â¶</a></h4>
<p>The config text file should have dynamic parameters for a frame on each line. It can have single parameter or multiple parameters for a frame on each line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;frameNumberN1&gt;:&lt;key1&gt;=&lt;value1&gt;
&lt;frameNumberN2&gt;:&lt;key2&gt;=&lt;value2&gt;,&lt;key3&gt;=&lt;value3&gt;
</pre></div>
</div>
<p><strong>Keys allowed with their range of values</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Dynamic Parameter</p></th>
<th class="head"><p>Key</p></th>
<th class="head"><p>Valid Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Number of B frames</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NumB=&lt;int&gt;</span></code></p></td>
<td><p>0 to 4</p></td>
</tr>
<tr class="row-odd"><td><p>Bitrate (in bits per second)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BR=&lt;int&gt;</span></code></p></td>
<td><p>1K to INT_MAX</p></td>
</tr>
<tr class="row-even"><td><p>Temporal AQ mode</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tAQ=&lt;int&gt;</span></code></p></td>
<td><p>0 to 1</p></td>
</tr>
<tr class="row-odd"><td><p>Spatial AQ mode</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sAQ=&lt;int&gt;</span></code></p></td>
<td><p>0 to 1</p></td>
</tr>
<tr class="row-even"><td><p>Spatial AQ gain</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sAQGain=&lt;int&gt;</span></code></p></td>
<td><p>0 to 100</p></td>
</tr>
</tbody>
</table>
<p><strong>Sample dynamic params config file contents</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>300:NumB=1
600:BR=6000000
1200:sAQ=1,sAQGain=50
1800:tAQ=1
2400:NumB=0,BR=10000000,sAQ=0,sAQGain=50,tAQ=0
</pre></div>
</div>
</section>
</section>
<section id="limitations-of-the-transcoder-app">
<h3>Limitations of the Transcoder App<a class="headerlink" href="#limitations-of-the-transcoder-app" title="Link to this heading">Â¶</a></h3>
<ul class="simple">
<li><p>The transcoder application supports only elementary H264/HEVC encoded streams as input file. It cannot parse container formats like MP4, AVI, etc.</p></li>
<li><p>The transcoder outputs only H264/HEVC elementary streams.</p></li>
<li><p>The lookahead depth should be same for all the channels.</p></li>
<li><p>The dynamic params config file has a restricted format. Please check above sample config file format.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../gstreamer/xabrladder.html" class="btn btn-neutral float-left" title="GStreamer ABR Ladder Application" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../specs_and_features.html" class="btn btn-neutral float-right" title="Specs and Features of the Xilinx Video SDK" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on October 16, 2024.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>