<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Using GStreamer &mdash; Xilinx Video SDK 2.0 (Production) documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tuning Quality of Encoded Video" href="tuning_encoding_quality.html" />
    <link rel="prev" title="Using FFmpeg" href="using_ffmpeg.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="index.html" class="icon icon-home"> Xilinx Video SDK
            <img src="_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_on_prem.html">On Premises</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_on_vt1.html">Amazon EC2 VT1</a></li>
<li class="toctree-l1"><a class="reference internal" href="container_setup.html">Container Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Tutorials and Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="specs_and_features.html">Specs and Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_ffmpeg.html">Using FFmpeg</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using GStreamer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview-of-the-gstreamer-plugins">Overview of the GStreamer Plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#decoder-plugin">Decoder Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#decoder-inputs-and-outputs">Decoder Inputs and Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decoder-parameters">Decoder Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decoder-example-pipelines">Decoder Example Pipelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#encoder-plugin">Encoder Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#encoder-inputs-and-outputs">Encoder Inputs and Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encoder-parameters">Encoder Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encoder-example-pipelines">Encoder Example Pipelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#abr-scaler-plugin">ABR Scaler Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#abr-scaler-inputs-and-outputs">ABR Scaler Inputs and Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#abr-scaler-parameters">ABR Scaler Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#abr-scaler-example-pipelines">ABR Scaler Example Pipelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lookahead-plugin">Lookahead Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lookahead-inputs-and-outputs">Lookahead Inputs and Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lookahead-parameters">Lookahead Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lookahead-example-pipeline">Lookahead Example pipeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#moving-data-through-the-pipeline">Moving Data through the Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-multiple-devices">Working with Multiple Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mapping-audio-streams">Mapping Audio Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rebuilding-gstreamer">Rebuilding GStreamer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tuning_encoding_quality.html">Tuning Quality of Encoded Video</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_compute_resources.html">Managing Compute Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploying_with_kubernetes.html">Deploying with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_apis.html">C API Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="card_management.html">Card Management</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/video-sdk-staging/issues">File an issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/video-sdk/browse.html">Other versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Xilinx Video SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Using GStreamer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/using_gstreamer.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="using-gstreamer">
<span id="id1"></span><h1>Using GStreamer<a class="headerlink" href="#using-gstreamer" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#decoder-plugin" id="id3">Decoder Plugin</a></p></li>
<li><p><a class="reference internal" href="#encoder-plugin" id="id4">Encoder Plugin</a></p></li>
<li><p><a class="reference internal" href="#abr-scaler-plugin" id="id5">ABR Scaler Plugin</a></p></li>
<li><p><a class="reference internal" href="#lookahead-plugin" id="id6">Lookahead Plugin</a></p></li>
<li><p><a class="reference internal" href="#moving-data-through-the-pipeline" id="id7">Moving Data through the Pipeline</a></p></li>
<li><p><a class="reference internal" href="#working-with-multiple-devices" id="id8">Working with Multiple Devices</a></p></li>
<li><p><a class="reference internal" href="#mapping-audio-streams" id="id9">Mapping Audio Streams</a></p></li>
<li><p><a class="reference internal" href="#rebuilding-gstreamer" id="id10">Rebuilding GStreamer</a></p></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>GStreamer is a pipeline-based multimedia framework that links together a wide variety of media processing systems to complete complex workflows. The pipeline design serves as a base to create many types of multimedia applications such as video editors, transcoders, streaming media broadcasters and media players. The Xilinx Video SDK includes an enhanced version of GStreamer which can communicate with the hardware accelerated transcode pipeline in Xilinx devices.</p>
<p>It is not within the scope of this document to provide an exhaustive guide on the usage of GStreamer. Various resources can be found online, for example:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://gstreamer.freedesktop.org/">https://gstreamer.freedesktop.org/</a></p></li>
</ul>
<div class="section" id="overview-of-the-gstreamer-plugins">
<h3>Overview of the GStreamer Plugins<a class="headerlink" href="#overview-of-the-gstreamer-plugins" title="Permalink to this headline">¶</a></h3>
<p>The Xilinx Video SDK provides the following GStreamer plugins for building hardware-accelerated video pipelines using Xilinx devices:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vvas_xvcudec</span></code> for H.264/H.265 decoding</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vvas_xvcuenc</span></code> for H.264/H.265 encoding</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vvas_xabrscaler</span></code> for hardware accelerated scaling and color conversion</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vvas_xlookahead</span></code> for hardware accelerated lookahead</p></li>
</ul>
<p>All the GStreamer plugins included in the Xilinx Video SDK are released under the Vitis Video Analytics SDK (VVAS), a framework to build GStreamer-based solutions on Xilinx platforms. Source code and build scripts for the GStreamer plugins developed by Xilinx can be found the in the <code class="file docutils literal notranslate"><span class="pre">sources/video-sdk-gstreamer</span></code> folder of the Xilinx Video SDK repository.</p>
<p>The following sections describe the options used with GStreamer to configure and use the various hardware accelerators available on Xilinx devices.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="decoder-plugin">
<span id="gst-decoder-plugin"></span><h2><a class="toc-backref" href="#id3">Decoder Plugin</a><a class="headerlink" href="#decoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>For the complete list of features and capabilities of the Xilinx hardware decoder, refer to the <a class="reference internal" href="specs_and_features.html#video-codec-unit"><span class="std std-ref">Video Codec Unit</span></a> section of the <a class="reference internal" href="specs_and_features.html"><span class="doc">Specs and Features</span></a> chapter of the documentation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">vvas_xvcudec</span></code> plugin provides support for hardware-accelerated H.264/H.265 decoding using Xilinx devices.</p>
<div class="section" id="decoder-inputs-and-outputs">
<h3>Decoder Inputs and Outputs<a class="headerlink" href="#decoder-inputs-and-outputs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Input: H.264/H.265 encoded stream in byte-stream formats</p></li>
<li><p>Output: raw NV12 frames with the following requirements:</p></li>
</ul>
</div>
<div class="section" id="decoder-parameters">
<h3>Decoder Parameters<a class="headerlink" href="#decoder-parameters" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-avoid-dynamic-alloc">
<span class="sig-name descname"><span class="pre">avoid-dynamic-alloc</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-avoid-dynamic-alloc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Avoid dynamic allocation of output buffers</strong></div>
<div class="line">Type: Boolean</div>
<div class="line">Default Value: True</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-avoid-output-copy">
<span class="sig-name descname"><span class="pre">avoid-output-copy</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-avoid-output-copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Avoid output frames copy</strong></div>
<div class="line">Avoid output frames copy even when downstream does not support GstVideoMeta metadata</div>
<div class="line">Type: Boolean</div>
<div class="line">Default Value: false</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-disable-hdr10-sei">
<span class="sig-name descname"><span class="pre">disable-hdr10-sei</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-disable-hdr10-sei" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Whether to passthrough HDR10/10+ SEI messages or not</strong></div>
<div class="line">Type: Boolean</div>
<div class="line">Default Value: True</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-dev-idx">
<span class="sig-name descname"><span class="pre">dev-idx</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-dev-idx" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Index of the device on which the decoder should be executed</strong></div>
<div class="line">For more details, refer to the section about <a class="reference internal" href="#gst-multiple-devices"><span class="std std-ref">Working with Multiple Devices</span></a></div>
<div class="line">Valid Device index is 0 to 31. Default value is set to -1 intentionally so that user provides the correct device index.</div>
<div class="line">Type: Integer</div>
<div class="line">Range: -1 to 31</div>
<div class="line">Default Value: -1</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-0">
<span class="sig-name descname"><span class="pre">disable-hdr10-sei</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Whether to passthrough HDR10/10+ SEI messages or not</strong></div>
<div class="line">Type: Boolean</div>
<div class="line">Default Value: false</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-low-latency">
<span class="sig-name descname"><span class="pre">low-latency</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-low-latency" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Whether to enable low latency or not</strong></div>
<div class="line">Type: Boolean</div>
<div class="line">Range: true or false</div>
<div class="line">Default Value: false</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-num-entropy-buf">
<span class="sig-name descname"><span class="pre">num-entropy-buf</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-num-entropy-buf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Specifies the number of decoder internal entropy buffers</strong></div>
<div class="line">Used to smooth out entropy decoding performance. Increasing buffering-count increases decoder memory footprint. Set this value to 10 for higher bit-rate use cases, for example uses cases where the bitrate is more than 100 Mb/s.</div>
<div class="line">Type: Unsigned integer</div>
<div class="line">Range: 2 to 10</div>
<div class="line">Default Value: 2</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-reservation-id">
<span class="sig-name descname"><span class="pre">reservation-id</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-reservation-id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Resource Pool Reservation id</strong></div>
<div class="line">Type: Unsigned Integer64</div>
<div class="line">Range: 0 - 18446744073709551615</div>
<div class="line">Default Value: 0</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-slplitbuff-mode">
<span class="sig-name descname"><span class="pre">slplitbuff-mode</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-slplitbuff-mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Whether to enable splitbuff mode or not</strong></div>
<div class="line">Type: Boolean</div>
<div class="line">Default Value: false</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="decoder-example-pipelines">
<h3>Decoder Example Pipelines<a class="headerlink" href="#decoder-example-pipelines" title="Permalink to this headline">¶</a></h3>
<p>Refer to the <a class="reference internal" href="examples/gstreamer/tutorials.html#gstreamer-decode-only"><span class="std std-ref">Decoder Pipeline</span></a> example for an illustration of how to use this plugin.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="encoder-plugin">
<span id="gst-encoder-plugin"></span><h2><a class="toc-backref" href="#id4">Encoder Plugin</a><a class="headerlink" href="#encoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>For the complete list of features and capabilities of the Xilinx hardware encoder, refer to the <a class="reference internal" href="specs_and_features.html#video-codec-unit"><span class="std std-ref">Video Codec Unit</span></a> section of the <a class="reference internal" href="specs_and_features.html"><span class="doc">Specs and Features</span></a> chapter of the documentation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">vvas_xvcuenc</span></code> plugin provides support for hardware-accelerated H.264/H.265 encoding using Xilinx devices.</p>
<div class="section" id="encoder-inputs-and-outputs">
<h3>Encoder Inputs and Outputs<a class="headerlink" href="#encoder-inputs-and-outputs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Input: raw 8-bit (NV12) or 10-bit (NV12_10LE32) video data</p></li>
<li><p>Output: H264/H265 8-bit/10-bit encoded stream in byte-stream format</p></li>
</ul>
</div>
<div class="section" id="encoder-parameters">
<h3>Encoder Parameters<a class="headerlink" href="#encoder-parameters" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-aspect-ratio">
<span class="sig-name descname"><span class="pre">aspect-ratio</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-aspect-ratio" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Display aspect ratio of the video sequence to be written in SPS/VUI</strong></div>
<div class="line">Type: Enum</div>
<div class="line-block">
<div class="line">(0): auto             - 4:3 for SD video,16:9 for HD video,unspecified for unknown format</div>
<div class="line">(1): 4-3              - 4:3 aspect ratio</div>
<div class="line">(2): 16-9             - 16:9 aspect ratio</div>
<div class="line">(3): none             - Aspect ratio information is not present in the stream</div>
</div>
<div class="line">Default: 0</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-b-frames">
<span class="sig-name descname"><span class="pre">b-frames</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-b-frames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of B-frames between two consecutive P-frames</strong></div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 4294967295</div>
<div class="line">Default: 2</div>
<div class="line">Consult the <a class="reference internal" href="tuning_encoding_quality.html#tuning-b-frames"><span class="std std-ref">B Frames</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-control-rate">
<span class="sig-name descname"><span class="pre">control-rate</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-control-rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Bitrate control method</strong></div>
<div class="line">Type: Enum</div>
<div class="line-block">
<div class="line">(0): disable          - Disable</div>
<div class="line">(1): constant         - Constant</div>
<div class="line">(2): variable         - Variable</div>
<div class="line">(3): low-latency      - Low Latency</div>
</div>
<div class="line">Default: 1, “constant”</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-1">
<span class="sig-name descname"><span class="pre">dev-idx</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Index of the device on which the encoder should be executed</strong></div>
<div class="line">For more details, refer to the section about <a class="reference internal" href="#gst-multiple-devices"><span class="std std-ref">Working with Multiple Devices</span></a></div>
<div class="line">Type: Integer</div>
<div class="line">Range: -1 - 31</div>
<div class="line">Default: -1</div>
<div class="line">Valid Device index is 0 to 31. Default value is set to -1 intentionally so that user provides the correct device index.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-enable-pipeline">
<span class="sig-name descname"><span class="pre">enable-pipeline</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-enable-pipeline" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Enable buffer pipelining to improve performance in non zero-copy use cases</strong></div>
<div class="line">Type: Boolean</div>
<div class="line">Default: False</div>
<div class="line">Set this value to True when the encoder on a device receives data from other device</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-gop-length">
<span class="sig-name descname"><span class="pre">gop-length</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-gop-length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of frames in a GOP</strong></div>
<div class="line">Distance between two consecutive I frames. Must be a multiple of (b-frames+1)</div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 1000</div>
<div class="line">Default: 120</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-max-bitrate">
<span class="sig-name descname"><span class="pre">max-bitrate</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-max-bitrate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Max bitrate in Kbps.</strong> Only used if control-rate=variable</div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 4294967295</div>
<div class="line">Default: 5000</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-max-qp">
<span class="sig-name descname"><span class="pre">max-qp</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-max-qp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Maximum QP value allowed for the rate control</strong></div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 51</div>
<div class="line">Default: 51</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-min-qp">
<span class="sig-name descname"><span class="pre">min-qp</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-min-qp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Minimum QP value allowed for the rate control</strong></div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 51</div>
<div class="line">Default: 0</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-num-cores">
<span class="sig-name descname"><span class="pre">num-cores</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-num-cores" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of encoder cores to be used for current stream</strong></div>
<div class="line">If set to 0 (AUTO), the number of encoder cores is automatically determined. Otherwise sets the number of encoder cores to be used.</div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 4</div>
<div class="line">Default: 0</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-num-slices">
<span class="sig-name descname"><span class="pre">num-slices</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-num-slices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of slices produced for each frame.</strong></div>
<div class="line">Each slice contains one or more complete macroblock/CTU row(s). Slices are distributed over the frame</div>
<div class="line">as regularly as possible.</div>
<div class="line">In low-latency mode:</div>
<div class="line-block">
<div class="line">H.264(AVC): 32</div>
<div class="line">H.265 (HEVC): 22</div>
</div>
<div class="line">In normal latency-mode:</div>
<div class="line-block">
<div class="line">H.264(AVC): picture_height/16</div>
<div class="line">H.265(HEVC): minimum of picture_height/32</div>
</div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 1 - 68</div>
<div class="line">Default: 1</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-periodicity-idr">
<span class="sig-name descname"><span class="pre">periodicity-idr</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-periodicity-idr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Periodicity of IDR frames</strong></div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 4294967295</div>
<div class="line">Default: 4294967295</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-qp-mode">
<span class="sig-name descname"><span class="pre">qp-mode</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-qp-mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>QP control mode used by the encoder</strong></div>
<div class="line">Type: Enum</div>
<div class="line-block">
<div class="line">(0): Uniform - Use the same QP for all coding units of the frame</div>
<div class="line">(1): Auto - Let the encoder handle the QP for each coding unit according to its content</div>
<div class="line">(2): ROI - Adjust QP according to the regions of interest defined on each frame.</div>
<div class="line">(3): Relative-load - Use the information gathered in the lookahead to calculate the best QP</div>
</div>
<div class="line">Range: 0 - 3</div>
<div class="line">Default: 1 (i.e. auto)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-rc-mode">
<span class="sig-name descname"><span class="pre">rc-mode</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-rc-mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Enable custom rate control mode</strong></div>
<div class="line">To enable custom rate control, the Lookahead must be enabled, and both the Lookahead rc-mode and the Encoder rc-mode parameters must be set to True.</div>
<div class="line">Type: Boolean</div>
<div class="line">Default: True</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-2">
<span class="sig-name descname"><span class="pre">reservation-id</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Resource Pool Reservation id</strong></div>
<div class="line">Type: Unsigned Integer64</div>
<div class="line">Range: 0 - 18446744073709551615</div>
<div class="line">Default: 0</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-scaling-list">
<span class="sig-name descname"><span class="pre">scaling-list</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-scaling-list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Scaling list mode</strong></div>
<div class="line">Type: Enum</div>
<div class="line-block">
<div class="line">(0): Flat</div>
<div class="line">(1): Default</div>
</div>
<div class="line">Range: 0 - 1</div>
<div class="line">Default: 1</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-slice-qp">
<span class="sig-name descname"><span class="pre">slice-qp</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-slice-qp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Slice QP mode</strong></div>
<div class="line">When RateCtrlMode = CONST_QP the specified QP is applied to all slices.</div>
<div class="line">When RateCtrlMode = CBR the specified QP is used as initial QP</div>
<div class="line">Type: Integer</div>
<div class="line">Range: -1 - 51</div>
<div class="line">Default: -1</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-target-bitrate">
<span class="sig-name descname"><span class="pre">target-bitrate</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-target-bitrate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Target bitrate in Kbps. (5000 Kbps = component default)</strong></div>
<div class="line">This property can be changed in all the states of the element including PLAYING state.</div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 4294967295</div>
<div class="line">Default: 5000</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="encoder-example-pipelines">
<h3>Encoder Example Pipelines<a class="headerlink" href="#encoder-example-pipelines" title="Permalink to this headline">¶</a></h3>
<p>Refer to the <a class="reference internal" href="examples/gstreamer/tutorials.html#gstreamer-encode-only"><span class="std std-ref">Encoder Pipeline</span></a> example for an illustration of how to use this plugin.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="abr-scaler-plugin">
<span id="gst-scaler-plugin"></span><h2><a class="toc-backref" href="#id5">ABR Scaler Plugin</a><a class="headerlink" href="#abr-scaler-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">vvas_xabrscaler</span></code> plugin provides support for hardware-accelerated resizing and color space conversion using Xilinx devices. This plugin supports:</p>
<ol class="arabic simple">
<li><p>Single input multiple output pads</p></li>
<li><p>Color space conversion</p></li>
<li><p>Resizing</p></li>
<li><p>Each output pad has independent configurations, like resolution and color space.</p></li>
</ol>
<div class="section" id="abr-scaler-inputs-and-outputs">
<h3>ABR Scaler Inputs and Outputs<a class="headerlink" href="#abr-scaler-inputs-and-outputs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Input: raw data with 8-bit (NV12) or 10-bit format (NV12_10LE32)</p></li>
<li><p>Output: raw data with 8-bit (NV12) or 10-bit format (NV12_10LE32)</p></li>
</ul>
</div>
<div class="section" id="abr-scaler-parameters">
<h3>ABR Scaler Parameters<a class="headerlink" href="#abr-scaler-parameters" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-3">
<span class="sig-name descname"><span class="pre">avoid-output-copy</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Avoid output frames copy on all source pads</strong></div>
<div class="line">Avoid output frames copy on all source pads even when downstream does not support GstVideoMeta metadata</div>
<div class="line">Type: Boolean</div>
<div class="line">Default Value: false</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-coef-load-type">
<span class="sig-name descname"><span class="pre">coef-load-type</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-coef-load-type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>coefficients loading type for scaling</strong></div>
<div class="line">Type: Enum</div>
<div class="line-block">
<div class="line">(0): fixed   - Use fixed filter coefficients</div>
<div class="line">(1): auto    - Auto generate filter coefficients</div>
</div>
<div class="line">Default: 1</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-4">
<span class="sig-name descname"><span class="pre">dev-idx</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-4" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Index of the device on which the scaler should be executed</strong></div>
<div class="line">For more details, refer to the section about <a class="reference internal" href="#gst-multiple-devices"><span class="std std-ref">Working with Multiple Devices</span></a></div>
<div class="line">Type: Integer</div>
<div class="line">Range: -1 to 31</div>
<div class="line">Default: -1</div>
<div class="line">Valid Device index is 0 to 31. Default value is set to -1 intentionally so that user provides the correct device index</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-5">
<span class="sig-name descname"><span class="pre">enable-pipeline</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Enable buffer pipelining to improve performance in non zero-copy use cases</strong></div>
<div class="line">Type: Boolean</div>
<div class="line">Default: False</div>
<div class="line">Set this value to 1 when the scaler on one device is receiving data from other device</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-kernel-name">
<span class="sig-name descname"><span class="pre">kernel-name</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-kernel-name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Kernel and instance name</strong></div>
<div class="line">Type: String</div>
<div class="line">Range: Must be set to: scaler:scaler_1</div>
<div class="line">Default: NULL</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-6">
<span class="sig-name descname"><span class="pre">reservation-id</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-6" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Resource Pool Reservation id</strong></div>
<div class="line">Type: Unsigned Integer64</div>
<div class="line">Range: 0 - 18446744073709551615</div>
<div class="line">Default Value: 0</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="abr-scaler-example-pipelines">
<h3>ABR Scaler Example Pipelines<a class="headerlink" href="#abr-scaler-example-pipelines" title="Permalink to this headline">¶</a></h3>
<p>Refer to the <a class="reference internal" href="examples/gstreamer/tutorials.html#gstreamer-transcode-and-scale"><span class="std std-ref">Transcode with Multiple-Resolution Outputs</span></a> example for an illustration of how to use this plugin.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="lookahead-plugin">
<span id="gst-lookahead-plugin"></span><h2><a class="toc-backref" href="#id6">Lookahead Plugin</a><a class="headerlink" href="#lookahead-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">vvas_xlookahead</span></code> plugin provides support for hardware-accelerated lookahead functionality using Xilinx devices. This plugin is typically used in conjunction with the encoder plugin to improve the subjective quality of the encoded stream at the cost of latency. The plugin can generate quantization parameters (QP buffer) as well as frame sum of absolute differences and frame activity information (FSFA buffer). The QP and FSFA buffers are attached to the input frame as metadata and sent to next element in the GStreamer media pipeline</p>
<div class="section" id="lookahead-inputs-and-outputs">
<h3>Lookahead Inputs and Outputs<a class="headerlink" href="#lookahead-inputs-and-outputs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Accepts raw NV12 frames up to resolution 3840x2160 as input</p></li>
<li><p>Produces QP and/or FSFA buffers based on the following user controls:</p>
<ul>
<li><p>QP buffer is generated when the <a class="reference internal" href="#cmdoption-arg-lookahead-depth"><code class="xref std std-option docutils literal notranslate"><span class="pre">lookahead-depth</span></code></a> option is set to a value greater than 0.</p></li>
<li><p>FSFA buffer is generated when the <a class="reference internal" href="#cmdoption-arg-11"><code class="xref std std-option docutils literal notranslate"><span class="pre">rc-mode</span></code></a> option is enabled.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="lookahead-parameters">
<h3>Lookahead Parameters<a class="headerlink" href="#lookahead-parameters" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-7">
<span class="sig-name descname"><span class="pre">b-frames</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-7" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of B-frames between two consecutive P-frames</strong></div>
<div class="line">The same setting should be used for the encoder and lookahead plugins. This property can be changed in PAUSED/PLAYING state of the element when the encoder <code class="docutils literal notranslate"><span class="pre">gop-mode</span></code> is basic.</div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 - 4294967295</div>
<div class="line">Default: 2</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-codec-type">
<span class="sig-name descname"><span class="pre">codec-type</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-codec-type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Codec type H264/H265</strong></div>
<div class="line">The same setting should be used for the encoder and lookahead plugins. Based on the codec type, corresponding metadata will be produced and attached to the input frame</div>
<div class="line">Type: Enum</div>
<div class="line-block">
<div class="line">(0): H264</div>
<div class="line">(1): H265</div>
</div>
<div class="line">Range: N/A</div>
<div class="line">Default: None</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-8">
<span class="sig-name descname"><span class="pre">dev-idx</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-8" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Index of the device on which the lookahead should be executed</strong></div>
<div class="line">For more details, refer to the section about <a class="reference internal" href="#gst-multiple-devices"><span class="std std-ref">Working with Multiple Devices</span></a></div>
<div class="line">Type: Integer</div>
<div class="line">Range: -1 to 31</div>
<div class="line">Default: -1</div>
<div class="line">Valid Device index is 0 to 31. Default value is set to -1 intentionally so that user provides the correct device index</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-9">
<span class="sig-name descname"><span class="pre">gop-length</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-9" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of frames between consecutive keyframes. When this is set, same value should be set for encoder plugin as well</strong></div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 to 256</div>
<div class="line">Default: 120</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-10">
<span class="sig-name descname"><span class="pre">kernel-name</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-10" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Lookahead kernel name</strong></div>
<div class="line">Type: String</div>
<div class="line">Range: Must be set to: lookahead</div>
<div class="line">Default: NULL</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-lookahead-depth">
<span class="sig-name descname"><span class="pre">lookahead-depth</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-lookahead-depth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Lookahead depth</strong></div>
<div class="line">Type: Unsinged Integer</div>
<div class="line">Range: 1 to 20</div>
<div class="line">Default: 8</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-11">
<span class="sig-name descname"><span class="pre">rc-mode</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-11" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Enable custom rate control</strong></div>
<div class="line">To enable custom rate control, the Lookahead must be enabled, and both the Lookahead rc-mode and the Encoder rc-mode parameters must be set to True.</div>
<div class="line">Type: Boolean</div>
<div class="line">Range: N/A</div>
<div class="line">Default: False</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-12">
<span class="sig-name descname"><span class="pre">reservation-id</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-12" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Resource Pool Reservation id</strong></div>
<div class="line">Type: Unsigned Integer64</div>
<div class="line">Range: 0 - 18446744073709551615</div>
<div class="line">Default Value: 0</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-spatial-aq">
<span class="sig-name descname"><span class="pre">spatial-aq</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-spatial-aq" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Enable/Disable Spatial AQ activity</strong></div>
<div class="line">This property can be changed in all the states of the element including PLAYING state.</div>
<div class="line">Type: Boolean</div>
<div class="line">Range: N/A</div>
<div class="line">Default: True</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-spatial-aq-gain">
<span class="sig-name descname"><span class="pre">spatial-aq-gain</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-spatial-aq-gain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Percentage of Spatial AQ gain</strong>. Applied when enable-spatial-aq is true</div>
<div class="line">This property can be changed in all the states of the element including PLAYING state.</div>
<div class="line">Type: Unsigned Integer</div>
<div class="line">Range: 0 to 100</div>
<div class="line">Default: 50</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-temporal-aq">
<span class="sig-name descname"><span class="pre">temporal-aq</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-temporal-aq" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Enable/Disable Temporal AQ linear</strong></div>
<div class="line">This property can be changed in all the states of the element including PLAYING state.</div>
<div class="line">Type: Boolean</div>
<div class="line">Range: N/A</div>
<div class="line">Default: True</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="lookahead-example-pipeline">
<h3>Lookahead Example pipeline<a class="headerlink" href="#lookahead-example-pipeline" title="Permalink to this headline">¶</a></h3>
<p>Refer to the <a class="reference internal" href="examples/gstreamer/tutorials.html#gstreamer-lookahead-and-scale"><span class="std std-ref">Transcode with Lookahead for Multiple-Resolution outputs</span></a> example for an illustration of how to use this plugin.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;input mp4 absolute path&gt; ! qtdemux ! queue ! h264parse ! \
  vvas_xvcudec    dev-idx=0 ! queue ! \
  vvas_xlookahead dev-idx=0 kernel-name=lookahead codec-type=0 spatial-aq=1 temporal-aq=1 lookahead-depth=8 rc-mode=1 ! queue ! \
  vvas_xvcuenc    dev-idx=0 target-bitrate=4000 rc-mode=1 ! \
  h264parse ! &quot;video/x-h264&quot; ! fpsdisplaysink video-sink=&quot;fakesink&quot; text-overlay=false sync=false -v
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="moving-data-through-the-pipeline">
<h2><a class="toc-backref" href="#id7">Moving Data through the Pipeline</a><a class="headerlink" href="#moving-data-through-the-pipeline" title="Permalink to this headline">¶</a></h2>
<p>The GStreamer plugins included in the Xilinx Video SDK take care of efficiently moving data through the video processing pipeline. For optimal performance, video buffers will be moved between the host and the appropriate device only if needed by plugins in the pipeline. This is known as “zero-copy”.</p>
<ul class="simple">
<li><p>The decoder plugin will only copy the output buffer from the device to the host if a downstream element (e.g. filesink) running on the host needs to access the decoded frame. This allows downstream hardware-accelerated plugins (e.g. scaler, encoder) running on the same Xilinx device to process the decoded frames without unnecessary data transfers.</p></li>
<li><p>The encoder plugin will only copy the input buffer from host to the device if it is allocated in user-space memory on the host or in a different FPGA device. This allows the encoder to process frames produced by upstream hardware-accelerated plugins (e.g. decoder, scaler) running on the same Xilinx device without unnecessary data transfers.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="working-with-multiple-devices">
<span id="gst-multiple-devices"></span><h2><a class="toc-backref" href="#id8">Working with Multiple Devices</a><a class="headerlink" href="#working-with-multiple-devices" title="Permalink to this headline">¶</a></h2>
<p>By default (if no device identifier is specified) a job is submitted to device 0. When running large jobs or multiple jobs in parallel, device 0 is bound to run out of resources rapidly and additional jobs will error out due to insufficient resources.</p>
<p>By using the <a class="reference internal" href="#cmdoption-arg-8"><code class="xref std std-option docutils literal notranslate"><span class="pre">dev-idx</span></code></a> option of the GStreamer plugins included in the Xilinx Video SDK, the different functions (decoder, scaler, encoder) of a pipeline can be individually submitted to a specific device. This makes it easy and straightforward to leverage the entire video acceleration capacity of your system, regardless of the number of cards and devices.</p>
<p>Consult the <a class="reference internal" href="managing_compute_resources.html#using-explicit-device-ids"><span class="std std-ref">Using Explicit Device IDs</span></a> section for more details on how to work with multiple devices.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="mapping-audio-streams">
<span id="gst-mapping-audio-streams"></span><h2><a class="toc-backref" href="#id9">Mapping Audio Streams</a><a class="headerlink" href="#mapping-audio-streams" title="Permalink to this headline">¶</a></h2>
<p>This section gives examples on how to decode or transcode the input streams with both video and audio</p>
<p>Use MP4 container file with H264 video and MP3/AAC audio. Test both audio and video playback.Decode video using VVAS plugins and audio using open source plugins. Make sure both video and audio playback are in sync.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0  filesrc location=&lt;Input MP4 file&gt; \
  ! qtdemux name=demux demux. \
  ! queue \
  ! h264parse \
  ! vvas_xvcudec dev-idx=0 \
  ! autovideosink demux. \
  ! queue \
  ! mpegaudioparse \
  ! avdec_mp3  \
  ! autoaudiosink -v
</pre></div>
</div>
<p>Use MP4 container file with H265 video and MP3/AAC audio. Test both audio and video playback.Decode video using VVAS plugins and audio using open source plugins. Make sure both video and audio playback are in sync.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0  filesrc location=&lt;Input MP4 file&gt; \
 ! qtdemux name=demux demux. \
 ! queue \
 ! h265parse \
 ! vvas_xvcudec dev-idx=0 \
 ! autovideosink demux. \
 ! queue \
 ! mpegaudioparse \
 ! avdec_mp3  \
 ! autoaudiosink -v
</pre></div>
</div>
<p>Use MP4 container file with H264 video and MP3/AAC audio. Test both audio and video playback. Decode and scale video using VVAS plugins. Make sure to run decoder in one device and scaler on an another device. Decode the audio using opensource plugins. Make sure both video and audio playback are in sync.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;Input 1080p MP4 file&gt; \
 ! qtdemux name=demux demux. \
 ! queue  \
 ! h264parse \
 ! vvas_xvcudec dev-idx=0 \
 ! vvas_xabrscaler dev-idx=1 ppc=4 scale-mode=2 \
 ! video/x-raw, width=1280, height=720 \
 ! autovideosink demux. \
 ! queue \
 ! mpegaudioparse \
 ! avdec_mp3 \
 ! autoaudiosink -v
</pre></div>
</div>
<p>Use MP4 container file with H264 Video and AAC/MP3 audio. Transcode only video from H264 to H265 using VVAS plugins and keep audio as it is and mux them back to MP4.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;1080p60 mp4 with h264 stream&gt; \
 ! qtdemux name=demux qtmux name=mux \
 ! filesink location=output.mp4 demux.video_0 \
 ! queue \
 ! h264parse \
 ! vvas_xvcudec dev-idx=0 \
 ! vvas_xvcuenc dev-idx=0 target-bitrate=2000 \
 ! h265parse \
 ! video/x-h265 \
 ! mux. demux.audio_0 \
 ! queue \
 ! mpegaudioparse \
 !  mux.
</pre></div>
</div>
<p>When the GStreamer job has multiple outputs, It must be explicitely told which audio stream to map to each of the output streams. The example below implements an transcoding pipeline with an ABR ladder. The input audio stream is split into 4 different channels using qtdemux, one for each video output. The generated transcoded output streams will have both audio and video data.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=~/Akhanda.mp4 \
! qtdemux name=demux demux.video_0 ! queue \
! h264parse \
! vvas_xvcudec  dev-idx=0 ! queue \
! vvas_xabrscaler  dev-idx=0 ppc=4 scale-mode=2 avoid-output-copy=true name=sc_name sc_name.src_0 \
! queue \
! video/x-raw, width=1280, height=720 \
! vvas_xvcuenc name=enc_720p60 dev-idx=0  target-bitrate=3000 \
! h264parse \
! qtmux name=mux1 ! filesink location=/tmp/output1.mp4 demux.audio_0 ! tee name=tee ! queue ! mux1.audio_0 sc_name.src_1 \
! queue \
! video/x-raw, width=848, height=480 \
! vvas_xvcuenc name=enc_480p30 dev-idx=0  target-bitrate=2500 \
! h264parse \
! qtmux name=mux2 ! filesink location=/tmp/output2.mp4 tee. ! queue !  mux2.audio_0 sc_name.src_2 \
! queue \
! video/x-raw, width=640, height=360 \
! vvas_xvcuenc name=enc_360p30 dev-idx=0  target-bitrate=1250 \
! h264parse \
! qtmux name=mux3 ! filesink location=/tmp/output3.mp4 tee. ! queue ! mux3.audio_0 sc_name.src_3 \
! queue \
! video/x-raw, width=288, height=160 \
! vvas_xvcuenc name=enc_160p30 dev-idx=0  target-bitrate=625 \
! h264parse \
! qtmux name=mux4 ! filesink location=/tmp/output4.mp4 tee. ! queue ! mux4.audio_0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running the GStreamer pipelines with audio demux elements will give errors if run with input streams without audio</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="rebuilding-gstreamer">
<span id="rebuild-gstreamer"></span><h2><a class="toc-backref" href="#id10">Rebuilding GStreamer</a><a class="headerlink" href="#rebuilding-gstreamer" title="Permalink to this headline">¶</a></h2>
<p>Source code and build scripts for the GStreamer plugins developed by Xilinx can be found the in the <code class="file docutils literal notranslate"><span class="pre">sources/video-sdk-gstreamer</span></code> folder of the Xilinx Video SDK repository.</p>
<p>Follow these steps to rebuild GStreamer with the Xilinx Video SDK plugins enabled:</p>
<ol class="arabic">
<li><p>Navigate the top of the Xilinx Video SDK repository:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd /path/to/video-sdk
</pre></div>
</div>
</li>
<li><p>Make sure the sources have been downloaded from the repository:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git submodule update --init --recursive
</pre></div>
</div>
</li>
<li><p>Navigate to the directory containing the GStreamer sources:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd sources/video-sdk-gstreamer
</pre></div>
</div>
</li>
<li><p>Download, build, patch and install the GStreamer packages:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./install_gst.sh
</pre></div>
</div>
</li>
<li><p>Clean the Xilinx GStreamer plugin libraries:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./clean_vvas.sh
</pre></div>
</div>
</li>
<li><p>Build and install the Xilinx GStreamer plugins:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./build_install_vvas.sh PCIe 1
</pre></div>
</div>
</li>
</ol>
<p><strong>NOTE</strong>: The script <code class="file docutils literal notranslate"><span class="pre">sources/video-sdk-gstreamer/install_gst.sh</span></code> script deletes the source files after the installation. In order to preserve the patched open source GStreamer sources, use the <code class="file docutils literal notranslate"><span class="pre">sources/video-sdk-gstreamer/retrieve_gst_sources.sh</span></code> script. This script clones the open source GStreamer sources and applies the Xilinx specific patches on top of it. The patched sources are available in the following folders:</p>
<ul class="simple">
<li><p>/tmp/gst-libav-1.16.2</p></li>
<li><p>/tmp/gst-plugins-bad-1.16.2</p></li>
<li><p>/tmp/gst-plugins-base-1.16.2</p></li>
<li><p>/tmp/gst-plugins-good-1.16.2</p></li>
<li><p>/tmp/gstreamer-1.16.2</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="using_ffmpeg.html" class="btn btn-neutral float-left" title="Using FFmpeg" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tuning_encoding_quality.html" class="btn btn-neutral float-right" title="Tuning Quality of Encoded Video" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on July 26, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="https://pages.gitenterprise.xilinx.com/techdocs/Test/vvas/build/html/index.html#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>