<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Using FFmpeg &mdash; Xilinx Video SDK 1.0 (Production) documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running Multiple FFmpeg Jobs" href="running_multiple_jobs.html" />
    <link rel="prev" title="Specs and Features of the Xilinx Video SDK" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="index.html" class="icon icon-home"> Xilinx Video SDK
            <img src="_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation and Setup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Environment Setup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials and Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples/ffmpeg/tutorials.html">FFmpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/ffmpeg/filters.html">Software Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/ffmpeg/quality_analysis.html">Visual Quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/xma/xma_apps.html">XMA-based Apps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Specs and Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using FFmpeg</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-commands">Example Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-ffmpeg-for-video-encoding-and-decoding-on-alveo-u30">Using FFmpeg for Video Encoding and Decoding on Alveo U30</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-ffmpeg-options">General FFmpeg Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alveo-u30-encoder-options">Alveo U30 Encoder Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alveo-u30-decoder-options">Alveo U30 Decoder Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alveo-u30-miscellaneous-options">Alveo U30 Miscellaneous Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tuning-visual-quality-of-encoded-video">Tuning Visual Quality of Encoded Video</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#number-of-b-frames">Number of B Frames</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lookahead">Lookahead</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adaptive-quantization">Adaptive Quantization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scaling-list">Scaling List</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#considerations-for-decoding-and-encoding-4k-streams">Considerations for Decoding and Encoding 4K Streams</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-ffmpeg-for-video-scaling-on-alveo-u30">Using FFmpeg for Video Scaling on Alveo U30</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-alveo-u30-multiscale-filter">Using the Alveo U30 Multiscale Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alveo-u30-multiscale-filter-options">Alveo U30 Multiscale Filter Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encoding-scaler-outputs">Encoding Scaler Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-raw-scaler-outputs">Using Raw Scaler Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-considerations">Performance Considerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#moving-data-through-the-video-pipeline">Moving Data through the Video Pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#automatic-data-movement">Automatic Data Movement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#explicit-data-movement">Explicit Data Movement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rebuilding-ffmpeg">Rebuilding FFmpeg</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-source-code">Using the Source Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-git-patch-file">Using the Git Patch File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#xilinx-ffmpeg-reference-guide">Xilinx FFmpeg Reference Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#h-264-codec-reference">H.264 Codec Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#h-264-decoder-options">H.264 Decoder Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#h-264-encoder-options">H.264 Encoder Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hevc-codec-reference">HEVC Codec Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hevc-decoder-options">HEVC Decoder Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hevc-encoder-options">HEVC Encoder Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#multiscaler-filter-reference">Multiscaler Filter Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="running_multiple_jobs.html">Running Multiple Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_apis.html">C API Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="card_management.html">Card Management and Recovery</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/video-sdk/issues">File an issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/video-sdk/browse.html">Other versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Xilinx Video SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Using FFmpeg</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/using_ffmpeg.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="using-ffmpeg">
<h1>Using FFmpeg<a class="headerlink" href="#using-ffmpeg" title="Permalink to this headline">¶</a></h1>
<p>This page documents how to use FFmpeg with the Alveo U30 accelerated transcode pipeline.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#example-commands" id="id3">Example Commands</a></p></li>
<li><p><a class="reference internal" href="#using-ffmpeg-for-video-encoding-and-decoding-on-alveo-u30" id="id4">Using FFmpeg for Video Encoding and Decoding on Alveo U30</a></p></li>
<li><p><a class="reference internal" href="#using-ffmpeg-for-video-scaling-on-alveo-u30" id="id5">Using FFmpeg for Video Scaling on Alveo U30</a></p></li>
<li><p><a class="reference internal" href="#moving-data-through-the-video-pipeline" id="id6">Moving Data through the Video Pipeline</a></p></li>
<li><p><a class="reference internal" href="#rebuilding-ffmpeg" id="id7">Rebuilding FFmpeg</a></p></li>
<li><p><a class="reference internal" href="#xilinx-ffmpeg-reference-guide" id="id8">Xilinx FFmpeg Reference Guide</a></p></li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>FFmpeg is an industry standard, open source, widely used utility for handling video. FFmpeg has many capabilities, including encoding and decoding all video compression formats, encoding and decoding audio, encapsulating, and extracting audio, and video from transport streams, and many more.</p>
<p>FFmpeg is the primary interface to the Alveo U30 accelerated transcode pipeline. Xilinx supplies an enhanced version of FFmpeg that can communicate with the hardware accelerated transcode pipeline.</p>
<p>It is not within the scope of this document to provide an exhaustive guide on the usage of FFmpeg. Various resources can be found online, for example:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.ffmpeg.org/documentation.html">https://www.ffmpeg.org/documentation.html</a></p></li>
<li><p><a class="reference external" href="http://howto-pages.org/ffmpeg/">http://howto-pages.org/ffmpeg/</a></p></li>
</ul>
<p>The following sections describe the options used with FFmpeg to configure the various hardware accelerators available on the Alveo U30 card.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="example-commands">
<h2><a class="toc-backref" href="#id3">Example Commands</a><a class="headerlink" href="#example-commands" title="Permalink to this headline">¶</a></h2>
<p>A simple FFmpeg command for accelerated encoding on Alveo U30 will look similar to this one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mpsoc_vcu_h264</span> <span class="o">-</span><span class="n">i</span> <span class="n">infile</span><span class="o">.</span><span class="n">mp4</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mpsoc_vcu_hevc</span> <span class="o">-</span><span class="n">s</span><span class="p">:</span><span class="n">v</span> <span class="mi">1920</span><span class="n">x1080</span> <span class="o">-</span><span class="n">b</span><span class="p">:</span><span class="n">v</span> <span class="mi">1000</span><span class="n">K</span> <span class="o">-</span><span class="n">r</span> <span class="mi">60</span> <span class="o">-</span><span class="n">f</span> <span class="n">mp4</span> <span class="o">-</span><span class="n">y</span> <span class="n">transcoded</span><span class="o">.</span><span class="n">mp4</span>
</pre></div>
</div>
<p>There are many other ways in which FFmpeg can be used to leverage the video transcoding features of the Alveo U30 card. Examples illustrating how to run FFmpeg for encoding, decoding, and transcoding with and without ABR scaling. To see examples of all these possibilities, refer to the <a class="reference internal" href="examples/ffmpeg/tutorials.html"><span class="doc">FFmpeg tutorials</span></a> included in this repository.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="using-ffmpeg-for-video-encoding-and-decoding-on-alveo-u30">
<h2><a class="toc-backref" href="#id4">Using FFmpeg for Video Encoding and Decoding on Alveo U30</a><a class="headerlink" href="#using-ffmpeg-for-video-encoding-and-decoding-on-alveo-u30" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general-ffmpeg-options">
<h3>General FFmpeg Options<a class="headerlink" href="#general-ffmpeg-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Options</p></th>
<th class="head"><p>Descriptions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-i">
<span class="sig-name descname"><span class="pre">-i</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-i" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">The input file.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-b-v">
<span class="sig-name descname"><span class="pre">-b:v</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-b-v" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Specify the video bitrate.</div>
<div class="line">You can specify this in Mb or Kb. For example -b:v 1M or -b:v 1000K.</div>
<div class="line">Can be specified in Mb or Kb. For example -b:v 1M or -b:v 1000K</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-c-v">
<span class="sig-name descname"><span class="pre">-c:v</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-c-v" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Specify the video codec.</div>
<div class="line">This option must be set for any video stream sent to a Alveo U30 device.</div>
<div class="line">Valid values are <code class="docutils literal notranslate"><span class="pre">mpsoc_vcu_hevc</span></code> (for HEVC) or <code class="docutils literal notranslate"><span class="pre">mpsoc_vcu_h264</span></code> (for H.264)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-f">
<span class="sig-name descname"><span class="pre">-f</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-f" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">The container format.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-r">
<span class="sig-name descname"><span class="pre">-r</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-r" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">The frame rate in fps (Hz).</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-filter_complex">
<span id="cmdoption-filter-complex"></span><span class="sig-name descname"><span class="pre">-filter_complex</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-filter_complex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Used to specify ABR scaling options.</div>
<div class="line">Consult the <a class="reference internal" href="#setting-up-an-abr-ladder"><span class="std std-ref">Setting up an ABR ladder</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xlnx_hwdev">
<span id="cmdoption-xlnx-hwdev"></span><span class="sig-name descname"><span class="pre">-xlnx_hwdev</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xlnx_hwdev" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Specify on which Alveo U30 device the FFmpeg job should run</div>
<div class="line">Valid values are positive integers. Default is device 0.</div>
<div class="line">Consult the <a class="reference internal" href="running_multiple_jobs.html#using-explicit-device-ids"><span class="std std-ref">Using Explicit Device IDs</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alveo-u30-encoder-options">
<h3>Alveo U30 Encoder Options<a class="headerlink" href="#alveo-u30-encoder-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Options</p></th>
<th class="head"><p>Descriptions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-cores">
<span class="sig-name descname"><span class="pre">-cores</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-cores" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of encoder cores in the Alveo U30 to utilize</strong></div>
<div class="line">Valid values: 0 to 4</div>
<div class="line">The Alveo U30 devices are built of encoder and decoder cores that each run at 1080p60, and 1080p120</div>
<div class="line">speed, respectively. This means to operate on a 4kp60 (maximum throughput of the chip), all cores</div>
<div class="line">are fully utilized automatically. If you operate on a smaller file (e.g. a single 1080p60 clip),</div>
<div class="line">you can leverage all of the cores to increase the FPS at which it processes. This is particularly</div>
<div class="line">useful in “faster than realtime” (FTRT) use cases, where you want to finish encoding of a clip as fast</div>
<div class="line">as possible. The <a class="reference internal" href="#cmdoption-cores"><code class="xref std std-option docutils literal notranslate"><span class="pre">-cores</span></code></a> option will provide diminishing returns when multiple streams are</div>
<div class="line">processed on the same device. Likewise, this option has limited value on livestreaming use-cases as</div>
<div class="line">you cannot operate on a video stream faster than you receive it.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-slices">
<span class="sig-name descname"><span class="pre">-slices</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-slices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of slices to operate on at once within a core</strong></div>
<div class="line">Valid values: 0 to 68</div>
<div class="line">Slices are a fundamental part of the stream format. You can operate on these in parallel to increase</div>
<div class="line">speed at which a stream is processed.</div>
<div class="line">However, operating on multiple “slices” of video at once will have negative video quality.</div>
<div class="line">When used in conjunction with <a class="reference internal" href="#cmdoption-cores"><code class="xref std std-option docutils literal notranslate"><span class="pre">-cores</span></code></a>, you can maximize the processing FPS on video streams.</div>
<div class="line">This option must be used when encoding 4k streams to H.264 in order to sustain real-time performance.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-g">
<span class="sig-name descname"><span class="pre">-g</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-g" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>GOP size</strong></div>
<div class="line">Set this to 2x frame rate for a 2 second GOP</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-level">
<span class="sig-name descname"><span class="pre">-level</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Encoding level restriction</strong></div>
<div class="line">1 (default). If the user does not set this value, the encoder will automatically assign appropriate</div>
<div class="line">level based on resolution, frame rate and bitrate</div>
<div class="line">Valid values for H.264: 1, 1.1, 1.2, 1.3, 2, 2.1, 2.2, 3, 3.1, 3.2, 4, 4.1, 4.2, 5, 5.1, 5.2</div>
<div class="line">Valid values for HEVC: 1, 2, 2.1, 3, 3.1, 4, 4.1, 5, 5.1</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-profile">
<span class="sig-name descname"><span class="pre">-profile</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-profile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Set the encoding profile</strong></div>
<div class="line">Valid values for H.264: <code class="docutils literal notranslate"><span class="pre">high</span></code> (default), <code class="docutils literal notranslate"><span class="pre">baseline</span></code>, <code class="docutils literal notranslate"><span class="pre">main</span></code></div>
<div class="line">Valid values for HEVC: <code class="docutils literal notranslate"><span class="pre">main</span></code> (default), <code class="docutils literal notranslate"><span class="pre">main-intra</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-max-bitrate">
<span class="sig-name descname"><span class="pre">-max-bitrate</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-max-bitrate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Maximum bitrate</strong></div>
<div class="line">Valid values: 0 to 3.5e+10 (default 5e+06)</div>
<div class="line">You may want to use this to limit encoding bitrate if you have not specified a <a class="reference internal" href="#cmdoption-b-v"><code class="xref std std-option docutils literal notranslate"><span class="pre">-b:v</span></code></a> bitrate</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-periodicity-idr">
<span class="sig-name descname"><span class="pre">-periodicity-idr</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-periodicity-idr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>IDR picture frequency</strong></div>
<div class="line">Valid values: 0 to UINT32_MAX (default)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-bf">
<span class="sig-name descname"><span class="pre">-bf</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-bf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of B frames</strong></div>
<div class="line">Valid values: 0 to 4 (default is 2)</div>
<div class="line">For tuning use 1 or 2 to improve video quality at the cost of latency.</div>
<div class="line">Consult the <a class="reference internal" href="#tuning-b-frames"><span class="std std-ref">B Frames</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-lookahead_depth">
<span id="cmdoption-lookahead-depth"></span><span class="sig-name descname"><span class="pre">-lookahead_depth</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-lookahead_depth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Number of frames to lookahead for qp maps</strong></div>
<div class="line">Valid values: 0 (default) to 20</div>
<div class="line">For tuning set this to 20 to improve subjective video quality at the cost of latency.</div>
<div class="line">Lookahead is not supported when encoding 4k streams.</div>
<div class="line">Consult the <a class="reference internal" href="#tuning-lookahead"><span class="std std-ref">Lookahead</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-qp-mode">
<span class="sig-name descname"><span class="pre">-qp-mode</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-qp-mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>QP control mode</strong></div>
<div class="line">Valid values: <code class="docutils literal notranslate"><span class="pre">auto</span></code> (default), <code class="docutils literal notranslate"><span class="pre">relative_load</span></code>, <code class="docutils literal notranslate"><span class="pre">uniform</span></code></div>
<div class="line">For tuning use uniform for best objective scores</div>
<div class="line">Consult the <a class="reference internal" href="#tuning-aq"><span class="std std-ref">Adaptive Quantization</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-spatial-aq">
<span class="sig-name descname"><span class="pre">-spatial-aq</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-spatial-aq" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Enable spatial AQ</strong></div>
<div class="line">Valid values: disable or enable (default)</div>
<div class="line">Consult the <a class="reference internal" href="#tuning-aq"><span class="std std-ref">Adaptive Quantization</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-spatial-aq-gain">
<span class="sig-name descname"><span class="pre">-spatial-aq-gain</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-spatial-aq-gain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Percentage of spatial AQ gain.</div>
<div class="line">Valid values: 0 to 100 (default 50)</div>
<div class="line">Consult the <a class="reference internal" href="#tuning-aq"><span class="std std-ref">Adaptive Quantization</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-temporal-aq">
<span class="sig-name descname"><span class="pre">-temporal-aq</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-temporal-aq" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Enable temporal AQ</strong></div>
<div class="line">Valid values: disable or enable (default)</div>
<div class="line">Consult the <a class="reference internal" href="#tuning-aq"><span class="std std-ref">Adaptive Quantization</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-scaling-list">
<span class="sig-name descname"><span class="pre">-scaling-list</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-scaling-list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Determine if the quantization values are auto scaled</strong></div>
<div class="line">Valid values:  0, 1 (default)</div>
<div class="line">Consult the <a class="reference internal" href="#tuning-scaling-list"><span class="std std-ref">Scaling List</span></a> section for more details on how to use this option.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-vsync">
<span class="sig-name descname"><span class="pre">-vsync</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-vsync" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Add in a vsync frame</strong></div>
<div class="line">Valid values: 0, 1</div>
<div class="line">Set this to 0 to prevent extra frames being added.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alveo-u30-decoder-options">
<h3>Alveo U30 Decoder Options<a class="headerlink" href="#alveo-u30-decoder-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Options</p></th>
<th class="head"><p>Descriptions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-low_latency">
<span id="cmdoption-low-latency"></span><span class="sig-name descname"><span class="pre">-low_latency</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-low_latency" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Configure decoder to handle out-of-order frames in order to decrease the latency of the system.</div>
<div class="line">IMPORTANT: This option should not be used when processing streams containing B frames.</div>
<div class="line">Valid values: 0 (default) and 1</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-entropy_buffers_count">
<span id="cmdoption-entropy-buffers-count"></span><span class="sig-name descname"><span class="pre">-entropy_buffers_count</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-entropy_buffers_count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Specify number of internal entropy buffers.</div>
<div class="line">Valid values: 2 (default) to 10</div>
<div class="line">Can be used to improve the performance of ABR ladders for input streams with a high bitrate</div>
<div class="line">or a high number of reference frames. 2 is enough for most cases. 5 is the practical limit.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-splitbuff_mode">
<span id="cmdoption-splitbuff-mode"></span><span class="sig-name descname"><span class="pre">-splitbuff_mode</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-splitbuff_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Configure decoder in split/unsplit input buffer mode.</div>
<div class="line">Valid values: 0 (default) and 1</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alveo-u30-miscellaneous-options">
<h3>Alveo U30 Miscellaneous Options<a class="headerlink" href="#alveo-u30-miscellaneous-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Options</p></th>
<th class="head"><p>Descriptions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-latency_logging">
<span id="cmdoption-latency-logging"></span><span class="sig-name descname"><span class="pre">-latency_logging</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-latency_logging" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Log latency information to syslog.</div>
<div class="line">Valid values: 0 (disabled, default) and 1 (enabled)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-loglevel">
<span class="sig-name descname"><span class="pre">-loglevel</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-loglevel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line">Configures the FFmpeg log level.</div>
<div class="line">Setting this option to <code class="docutils literal notranslate"><span class="pre">debug</span></code> displays comprehensive debug information about the job</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tuning-visual-quality-of-encoded-video">
<span id="tuning-encoder-options"></span><h3>Tuning Visual Quality of Encoded Video<a class="headerlink" href="#tuning-visual-quality-of-encoded-video" title="Permalink to this headline">¶</a></h3>
<p>The quality of encoded video depends on various factors. It is primarily a function of target bit rate and type of video content. However, there are some encoder parameters which can be used to adjust the video quality in the Alveo U30 card.</p>
<p>The sections below describe the major FFmpeg options impacting visual quality. Various examples illustrating the effect of these settings can be found here: <a class="reference internal" href="examples/ffmpeg/quality_analysis.html"><span class="doc">Quality analysis examples</span></a>.</p>
<div class="section" id="number-of-b-frames">
<span id="tuning-b-frames"></span><h4>Number of B Frames<a class="headerlink" href="#number-of-b-frames" title="Permalink to this headline">¶</a></h4>
<p>The number of B frames can be adjusted according to the amount of motion in the video content. Xilinx suggests setting B frames to 2 for static scenes, slow to medium motion, talking head, or video conferencing type content and 1 for gaming and fast motion content.</p>
<p>To change B frames, use the <a class="reference internal" href="#cmdoption-bf"><code class="xref std std-option docutils literal notranslate"><span class="pre">-bf</span></code></a> option on the FFmpeg command line. Valid values are 0 to 4, default is 2.</p>
</div>
<div class="section" id="lookahead">
<span id="tuning-lookahead"></span><h4>Lookahead<a class="headerlink" href="#lookahead" title="Permalink to this headline">¶</a></h4>
<p>Lookahead is used to improve the accuracy of rate control by enabling the encoder to buffer a specified number of frames (using the parameter). Spatial and temporal complexity measures are computed for these frames. The rate control uses these measures to distribute more bits to frames which are hard to encode, and less bits to frames which are easy to encode. This redistribution results in better video quality. When latency is tolerable in applications, Xilinx recommends a lookahead depth of 20 frames to get optimum video quality.</p>
<p>To enable lookahead, use the <a class="reference internal" href="#cmdoption-lookahead_depth"><code class="xref std std-option docutils literal notranslate"><span class="pre">-lookahead_depth</span></code></a> option on the FFmpeg command line.</p>
</div>
<div class="section" id="adaptive-quantization">
<span id="tuning-aq"></span><h4>Adaptive Quantization<a class="headerlink" href="#adaptive-quantization" title="Permalink to this headline">¶</a></h4>
<p>This tool improves the visual quality by changing the quantization parameter (QP) within a frame. The QP for each frame is determined by the rate control, and adaptive quantization (AQ) adjusts QP on top of that for different regions within a frame. It exploits the fact that the human eye is more sensitive to certain regions of a frame and redistributes more bits to those regions.</p>
<p>The Alveo U30 card supports two types of AQ: Spatial Adaptive Quantization and Temporal Adaptive Quantization. Both of these AQ modes are enabled by default, and <a class="reference internal" href="#cmdoption-qp-mode"><code class="xref std std-option docutils literal notranslate"><span class="pre">-qp-mode</span></code></a> is set to <code class="docutils literal notranslate"><span class="pre">relative-load</span></code> when <a class="reference internal" href="#cmdoption-lookahead_depth"><code class="xref std std-option docutils literal notranslate"><span class="pre">-lookahead_depth</span></code></a> &gt;= 1.</p>
<p class="rubric">Spatial Adaptive Quantization</p>
<p>Spatial AQ adjusts the QP within a frame based on the spatial characteristics. The human eye is more sensitive to regions which are flat and have low texture than regions which have lots of detail and texture. Spatial AQ exploits this and provides more bits to the low texture and flat regions at the expense of high texture regions. This redistribution of bits to visually perceptible regions of the frame brings about visual improvement. Although spatial AQ improves visual quality, it hurts objective metrics and causes a drop in PSNR and VMAF. It is recommended to turn this feature off when performing PSNR/VMAF based evaluation.</p>
<p>The spatial AQ algorithm can be controlled using the <a class="reference internal" href="#cmdoption-spatial-aq-gain"><code class="xref std std-option docutils literal notranslate"><span class="pre">-spatial-aq-gain</span></code></a> option. The range of this option is from 0 to 100 and indicates the strength of this algorithm as a percentage.</p>
<p>To enable spatial AQ, set the <a class="reference internal" href="#cmdoption-spatial-aq-gain"><code class="xref std std-option docutils literal notranslate"><span class="pre">-spatial-aq-gain</span></code></a> to 1 and the <a class="reference internal" href="#cmdoption-spatial-aq-gain"><code class="xref std std-option docutils literal notranslate"><span class="pre">-spatial-aq-gain</span></code></a> to 50 on the FFmpeg command line. If no value is specified for the <a class="reference internal" href="#cmdoption-spatial-aq-gain"><code class="xref std std-option docutils literal notranslate"><span class="pre">-spatial-aq-gain</span></code></a> option, the default value is 50.</p>
<p class="rubric">Temporal Adaptive Quantization</p>
<p>Temporal AQ adjusts the QP based on the temporal characteristics of the sequence. It utilizes the lookahead frames to capture the temporal characteristics where static/low motion or background is differentiated with high motion regions. The high motion regions are not very sensitive to the human eye as compared with low motion regions. Temporal AQ exploits this fact and redistributes more bits to static or low motion regions.</p>
<p>To enable temporal AQ, set the <a class="reference internal" href="#cmdoption-temporal-aq"><code class="xref std std-option docutils literal notranslate"><span class="pre">-temporal-aq</span></code></a> option to 1 on the FFmpeg command line.</p>
</div>
<div class="section" id="scaling-list">
<span id="tuning-scaling-list"></span><h4>Scaling List<a class="headerlink" href="#scaling-list" title="Permalink to this headline">¶</a></h4>
<p>Scaling list offers a mechanism to scale the transform coefficients by specifying scaling matrices. This influences the quality of encoded video. There are two options to specify the scaling lists mode: 0 = default and 1 = flat.</p>
<p>For visual quality improvements, the scaling list mode must be set to default. The default scaling mode gives more importance to low-frequency coefficients and less importance to high-frequency coefficients. To improve the objective numbers (such as PSNR and VMAF), the scaling mode must be set to flat, where all the coefficients are scaled equally.</p>
<p>To change the scaling list mode, use the <a class="reference internal" href="#cmdoption-scaling-list"><code class="xref std std-option docutils literal notranslate"><span class="pre">-scaling-list</span></code></a> option (0 = flat, 1 = default) on the FFmpeg command line.</p>
</div>
</div>
<div class="section" id="considerations-for-decoding-and-encoding-4k-streams">
<h3>Considerations for Decoding and Encoding 4K Streams<a class="headerlink" href="#considerations-for-decoding-and-encoding-4k-streams" title="Permalink to this headline">¶</a></h3>
<p>The Xilinx Video SDK solution supports real-time decoding and encoding of 4k streams with the following notes:</p>
<ul class="simple">
<li><p>The Alveo U30 video pipeline is optimized for live-streaming use cases. For 4k streams with bitrates significantly higher than the ones typically used for live streaming, it may not be possible to sustain real-time performance.</p></li>
<li><p>When decoding 4k streams with a high bitrate, increasing the number of entropy buffers using the <a class="reference internal" href="#cmdoption-entropy_buffers_count"><code class="xref std std-option docutils literal notranslate"><span class="pre">-entropy_buffers_count</span></code></a> option can help improve performance</p></li>
<li><p>When encoding raw video to 4k, set the <code class="xref std std-option docutils literal notranslate"><span class="pre">-s</span></code> option to <code class="docutils literal notranslate"><span class="pre">3840x2160</span></code> to specify the desired resolution.</p></li>
<li><p>When encoding 4k streams to H.264, the <a class="reference internal" href="#cmdoption-slices"><code class="xref std std-option docutils literal notranslate"><span class="pre">-slices</span></code></a> option is required to sustain real-time performance. A value of 4 is recommended. This option is not required when encoding to HEVC.</p></li>
<li><p>The lookahead feature is not supported for 4k. FFmpeg will give an error if <a class="reference internal" href="#cmdoption-lookahead_depth"><code class="xref std std-option docutils literal notranslate"><span class="pre">-lookahead_depth</span></code></a> is enabled when encoding to 4k.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="using-ffmpeg-for-video-scaling-on-alveo-u30">
<span id="setting-up-an-abr-ladder"></span><h2><a class="toc-backref" href="#id5">Using FFmpeg for Video Scaling on Alveo U30</a><a class="headerlink" href="#using-ffmpeg-for-video-scaling-on-alveo-u30" title="Permalink to this headline">¶</a></h2>
<p>The Alveo U30 card provides hardware-accelerated video decoding, scaling, and encoding. Each device on an Alveo U30 card supports multiple input channels (raw or encoded) up to a total equivalent bandwidth of 4kp60. Using the Multiscale XMA FFmpeg plug-in included in the Xilinx Video SDK, each input channel can be scaled in hardware to multiple lower resolution and/or lower frame rate outputs.</p>
<p>The Xilinx Video SDK supports the following scaling features and capabilities:</p>
<ul class="simple">
<li><p>Up to 32 input streams of raw or encoded video can be scaled down per device</p></li>
<li><p>Each input stream can be scaled down to a maximum of 8 outputs streams of lower resolution and/or lower frame rate</p></li>
<li><p>Up to 32 scaled outputs streams are supported per device, up to a maximum total equivalent bandwidth of 4kp60</p></li>
<li><p>The scaler supports spatial resolutions from 3840x2160 to 128x128, in multiples of 4</p></li>
<li><p>Scaled output streams can optionally be encoded to H.264 of HEVC, using the same codec for all streams</p></li>
<li><p>The scaler passes scaled frames and meta data to the next scaling level (if one is defined) and to the encoder (if one is being used)</p></li>
<li><p>Each level of scaling adds a little more latency to the pipeline</p></li>
</ul>
<p>For additional details about the specification of the hardware scaler, refer to the <a class="reference internal" href="introduction.html#adaptive-bitrate-scaler"><span class="std std-ref">Adaptive Bitrate Scaler features</span></a> section in the introductory chapter of this user guide.</p>
<p>The figure below illustrates a scaling ladder with a 1920x1080 input and 4 outputs with resolutions of 1280x720, 852x480, 640x360, and 416x240, respectively.</p>
<img alt="output from one rung is passed to the next for further scaling" class="align-center" src="_images/abr-ladder.png" />
<p><strong>IMPORTANT:</strong> The frame rate and resolution of a given output should be smaller or equal than the rate of the previous output. Since the output of one scaling stage is passed as an input to the next, visual quality will be negatively affected if frame rate is increased after it has been lowered.</p>
<div class="section" id="using-the-alveo-u30-multiscale-filter">
<h3>Using the Alveo U30 Multiscale Filter<a class="headerlink" href="#using-the-alveo-u30-multiscale-filter" title="Permalink to this headline">¶</a></h3>
<p>This section describes the FFmpeg syntax to configure the scaler, create ABR ladders and use the corresponding output streams.</p>
<p>An ABR ladder is created using the FFmpeg <a class="reference internal" href="#cmdoption-filter_complex"><code class="xref std std-option docutils literal notranslate"><span class="pre">-filter_complex</span></code></a> <code class="docutils literal notranslate"><span class="pre">&quot;&lt;filter</span> <span class="pre">graph&gt;&quot;</span></code> syntax. The filter graph specification should be constructed in the following way:</p>
<ul class="simple">
<li><p>Add the <a class="reference internal" href="#cmdoption-arg-multiscale_xma"><code class="xref std std-option docutils literal notranslate"><span class="pre">multiscale_xma</span></code></a> filter to the graph</p></li>
<li><p>Set the number of scaler outputs</p></li>
<li><p>Set the width, height, and rate settings for each scaler output</p></li>
<li><p>Define the name each scaler output</p></li>
<li><p>If the outputs are not to encoded on the device, add <a class="reference internal" href="#cmdoption-arg-xvbm_convert"><code class="xref std std-option docutils literal notranslate"><span class="pre">xvbm_convert</span></code></a> filters to the filter graph to reformat the pixels</p></li>
</ul>
<p>The filter graph syntax must follow these rules:</p>
<ul class="simple">
<li><p>The entire filter graph sequence must be enclosed in quotes (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>)</p></li>
<li><p>Each option of the <a class="reference internal" href="#cmdoption-arg-multiscale_xma"><code class="xref std std-option docutils literal notranslate"><span class="pre">multiscale_xma</span></code></a> filter (outputs, width, height, rate) must be separated by a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>)</p></li>
<li><p>A white space must separate the last <a class="reference internal" href="#cmdoption-arg-multiscale_xma"><code class="xref std std-option docutils literal notranslate"><span class="pre">multiscale_xma</span></code></a> option from the list of output names</p></li>
<li><p>If <a class="reference internal" href="#cmdoption-arg-xvbm_convert"><code class="xref std std-option docutils literal notranslate"><span class="pre">xvbm_convert</span></code></a> filters must be added to the filter graph, they must be preceded by a semi-colon (<code class="docutils literal notranslate"><span class="pre">;</span></code>)</p></li>
<li><p>The filter graph sequence should not end with  <code class="docutils literal notranslate"><span class="pre">;&quot;</span></code></p></li>
</ul>
<p>The FFmpeg <code class="docutils literal notranslate"><span class="pre">-map</span></code> command is used to map and use each scaled output stream. All options of the <code class="docutils literal notranslate"><span class="pre">-map</span></code> commands must be separated by white spaces.</p>
<p>The following example shows a complete command to decode, scale and encode to two resolutions on device:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">y</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mpsoc_vcu_h264</span> <span class="o">-</span><span class="n">i</span> <span class="mi">1080</span><span class="n">p60_input</span><span class="o">.</span><span class="n">mp4</span> \
    <span class="o">-</span><span class="n">filter_complex</span> <span class="s2">&quot;multiscale_xma=outputs=2: </span><span class="se">\</span>
<span class="s2">    out_1_width=1280: out_1_height=720: out_1_rate=full: </span><span class="se">\</span>
<span class="s2">    out_2_width=640:  out_2_height=360: out_2_rate=half </span><span class="se">\</span>
<span class="s2">    [a][b]&quot;</span> \
    <span class="o">-</span><span class="nb">map</span> <span class="s2">&quot;[a]&quot;</span>       <span class="o">-</span><span class="n">b</span><span class="p">:</span><span class="n">v</span> <span class="mi">3</span><span class="n">M</span>    <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mpsoc_vcu_h264</span> <span class="o">-</span><span class="n">f</span> <span class="n">mp4</span> <span class="o">-</span><span class="n">y</span> <span class="mi">720</span><span class="n">p60</span><span class="o">.</span><span class="n">mp4</span> \
    <span class="o">-</span><span class="nb">map</span> <span class="s2">&quot;[b]&quot;</span> <span class="o">-</span><span class="n">r</span> <span class="mi">30</span> <span class="o">-</span><span class="n">b</span><span class="p">:</span><span class="n">v</span> <span class="mi">1250</span><span class="n">K</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mpsoc_vcu_h264</span> <span class="o">-</span><span class="n">f</span> <span class="n">mp4</span> <span class="o">-</span><span class="n">y</span> <span class="mi">360</span><span class="n">p30</span><span class="o">.</span><span class="n">mp4</span>
</pre></div>
</div>
<p>The following example shows a complete command to decode, scale and send two resolutions to the host for postprocessing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">y</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mpsoc_vcu_h264</span> <span class="o">-</span><span class="n">i</span> <span class="mi">1080</span><span class="n">p60_input</span> \
    <span class="o">-</span><span class="n">filter_complex</span> <span class="s2">&quot;multiscale_xma=outputs=2: </span><span class="se">\</span>
<span class="s2">    out_1_width=1280: out_1_height=720:  </span><span class="se">\</span>
<span class="s2">    out_2_width=640:  out_2_height=360 </span><span class="se">\</span>
<span class="s2">    [a][b]; [a]xvbm_convert[aa]; [b]xvbm_convert[bb]&quot;</span> \
    <span class="o">-</span><span class="nb">map</span> <span class="s2">&quot;[aa]&quot;</span> <span class="o">-</span><span class="n">f</span> <span class="n">rawvideo</span> <span class="o">-</span><span class="n">pix_fmt</span> <span class="n">nv12</span> <span class="mi">720</span><span class="n">p60</span><span class="o">.</span><span class="n">yuv</span> \
    <span class="o">-</span><span class="nb">map</span> <span class="s2">&quot;[bb]&quot;</span> <span class="o">-</span><span class="n">f</span> <span class="n">rawvideo</span> <span class="o">-</span><span class="n">pix_fmt</span> <span class="n">yuv420p</span> <span class="mi">360</span><span class="n">p60</span><span class="o">.</span><span class="n">yuv</span>
</pre></div>
</div>
</div>
<div class="section" id="alveo-u30-multiscale-filter-options">
<h3>Alveo U30 Multiscale Filter Options<a class="headerlink" href="#alveo-u30-multiscale-filter-options" title="Permalink to this headline">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-multiscale_xma">
<span id="cmdoption-arg-multiscale-xma"></span><span class="sig-name descname"><span class="pre">multiscale_xma</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-multiscale_xma" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter implementing the Xilinx ABR multiscaler. Takes one input and up to 8 output streams. The complete list of options is described below.</p>
</dd></dl>

<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Multiscale Filter Options</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Options</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-outputs">
<span class="sig-name descname"><span class="pre">outputs</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-outputs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Specify the number of scaler outputs</strong></div>
<div class="line">Valid values are integers between 1 and 8</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-out_-N-_width">
<span id="cmdoption-arg-out-n-width"></span><span class="sig-name descname"><span class="pre">out_{N}_width</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-out_-N-_width" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Specify the width of each of the scaler outputs</strong></div>
<div class="line">The output number {N} must be an integer value between 1 and 8, and must not exceed the number of outputs</div>
<div class="line">specified with <a class="reference internal" href="#cmdoption-arg-outputs"><code class="xref std std-option docutils literal notranslate"><span class="pre">outputs</span></code></a></div>
<div class="line">Valid values are integers between 3840 and 128, in multiples of 4</div>
<div class="line">The frame resolution of a given output should be smaller or equal than the resolution of the previous output</div>
</div>
</td>
</tr>
<tr class="row-even"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-out_-N-_height">
<span id="cmdoption-arg-out-n-height"></span><span class="sig-name descname"><span class="pre">out_{N}_height</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-out_-N-_height" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Specify the height of each of the scaler outputs</strong></div>
<div class="line">The output number {N} must be an integer value between 1 and 8, and must not exceed the number of outputs</div>
<div class="line">specified with <a class="reference internal" href="#cmdoption-arg-outputs"><code class="xref std std-option docutils literal notranslate"><span class="pre">outputs</span></code></a></div>
<div class="line">Valid values are integers between 2160 and 128, in multiples of 4</div>
<div class="line">The frame resolution of a given output should be smaller or equal than the resolution of the previous output</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-out_-N-_rate">
<span id="cmdoption-arg-out-n-rate"></span><span class="sig-name descname"><span class="pre">out_{N}_rate</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-out_-N-_rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</td>
<td><div class="line-block">
<div class="line"><strong>Specify the frame rate of each of the scaler outputs</strong></div>
<div class="line">By default, the scaler uses the input stream frame rate for all outputs. While the encoder supports frame</div>
<div class="line">dropping with the -r option, there is also hardware support in the scaler for dropping frames. Dropping</div>
<div class="line">frames in the scaler is preferred since it saves scaler bandwidth, allowing the scaler and encoder to operate</div>
<div class="line">more efficiently.</div>
<div class="line">The output number {N} must be an integer value between 1 and 8, and must not exceed the number of outputs</div>
<div class="line">specified with <a class="reference internal" href="#cmdoption-arg-outputs"><code class="xref std std-option docutils literal notranslate"><span class="pre">outputs</span></code></a></div>
<div class="line">Valid values are <code class="docutils literal notranslate"><span class="pre">full</span></code> (default) and <code class="docutils literal notranslate"><span class="pre">half</span></code></div>
<div class="line">The first output has to be full rate output (<code class="docutils literal notranslate"><span class="pre">out_1_rate=full</span></code>)</div>
<div class="line">The frame rate of a given output should be smaller or equal than the resolution of the previous output.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="encoding-scaler-outputs">
<h3>Encoding Scaler Outputs<a class="headerlink" href="#encoding-scaler-outputs" title="Permalink to this headline">¶</a></h3>
<p>The outputs of an ABR ladder can be encoded on the device using either the <code class="docutils literal notranslate"><span class="pre">mpsoc_vcu_h264</span></code> or the <code class="docutils literal notranslate"><span class="pre">mpsoc_vcu_hevc</span></code> codec. All outputs must be encoded using the same codec.</p>
<p>The following snippet shows how the desired codec is specified for each of the scaler outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">-</span><span class="nb">map</span> <span class="s2">&quot;[a]&quot;</span> <span class="o">-</span><span class="n">b</span><span class="p">:</span><span class="n">v</span> <span class="mi">4</span><span class="n">M</span>    <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mpsoc_vcu_h264</span> <span class="o">-</span><span class="n">f</span> <span class="n">mp4</span> <span class="mi">720</span><span class="n">p60_output</span><span class="o">.</span><span class="n">mp4</span> \
<span class="o">-</span><span class="nb">map</span> <span class="s2">&quot;[b]&quot;</span> <span class="o">-</span><span class="n">b</span><span class="p">:</span><span class="n">v</span> <span class="mi">1500</span><span class="n">k</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mpsoc_vcu_h264</span> <span class="o">-</span><span class="n">f</span> <span class="n">mp4</span> <span class="mi">480</span><span class="n">p60_output</span><span class="o">.</span><span class="n">mp4</span>
</pre></div>
</div>
<p>A full example of a raw to encoded ABR ladder can be found here: <a class="reference internal" href="examples/ffmpeg/tutorials.html#encode-only-multiple-res-outputs"><span class="std std-ref">Encode Only Into Multiple Resolution Outputs</span></a>.</p>
</div>
<div class="section" id="using-raw-scaler-outputs">
<h3>Using Raw Scaler Outputs<a class="headerlink" href="#using-raw-scaler-outputs" title="Permalink to this headline">¶</a></h3>
<p>To return raw video outputs from the ABR ladder, use the <a class="reference internal" href="#cmdoption-arg-xvbm_convert"><code class="xref std std-option docutils literal notranslate"><span class="pre">xvbm_convert</span></code></a> filter to copy the frames from the device to the host and set the desired pixel formal, as shown in this command snippet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="n">xvbm_convert</span><span class="p">[</span><span class="n">aa</span><span class="p">];</span> <span class="p">[</span><span class="n">b</span><span class="p">]</span><span class="n">xvbm_convert</span><span class="p">[</span><span class="n">bb</span><span class="p">];</span> \
<span class="o">-</span><span class="nb">map</span> <span class="s2">&quot;[aa]&quot;</span> <span class="o">-</span><span class="n">f</span> <span class="n">rawvideo</span> <span class="o">-</span><span class="n">pix_fmt</span> <span class="n">nv12</span>    <span class="o">-</span><span class="n">y</span> <span class="o">./</span><span class="n">outdir</span><span class="o">/</span><span class="mi">720</span><span class="n">p60_nv12</span><span class="o">.</span><span class="n">yuv</span> \
<span class="o">-</span><span class="nb">map</span> <span class="s2">&quot;[bb]&quot;</span> <span class="o">-</span><span class="n">f</span> <span class="n">rawvideo</span> <span class="o">-</span><span class="n">pix_fmt</span> <span class="n">yuv420p</span> <span class="o">-</span><span class="n">y</span> <span class="o">./</span><span class="n">outdir</span><span class="o">/</span><span class="mi">480</span><span class="n">p60_yuv420</span><span class="o">.</span><span class="n">yuv</span>
</pre></div>
</div>
</div>
<div class="section" id="performance-considerations">
<h3>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Permalink to this headline">¶</a></h3>
<p>Encoded input streams with a high bitrate or with a high number of reference frames can degrade the performance of an ABR ladder. The <a class="reference internal" href="#cmdoption-entropy_buffers_count"><code class="xref std std-option docutils literal notranslate"><span class="pre">-entropy_buffers_count</span></code></a> decoder option can be used to help with this. A value of 2 is enough for most cases, 5 is the practical limit.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="moving-data-through-the-video-pipeline">
<h2><a class="toc-backref" href="#id6">Moving Data through the Video Pipeline</a><a class="headerlink" href="#moving-data-through-the-video-pipeline" title="Permalink to this headline">¶</a></h2>
<div class="section" id="automatic-data-movement">
<h3>Automatic Data Movement<a class="headerlink" href="#automatic-data-movement" title="Permalink to this headline">¶</a></h3>
<p>The Xilinx Video SDK takes care of moving data efficiently through the FFmpeg pipeline in these situations:</p>
<p>Individual operations:</p>
<ul class="simple">
<li><p>Decoder input: encoded video is automatically sent from the host to the device</p></li>
<li><p>Scaler input: raw video is automatically sent from the host to the device</p></li>
<li><p>Encoder input: raw video is automatically sent from the host to the device</p></li>
<li><p>Encoder output: encoded video is automatically sent from the device to the host</p></li>
</ul>
<p>Multistage pipelines</p>
<ul class="simple">
<li><p>Pipelines with hardware accelerators only (such as transcoding with ABR ladder): the video frames remain on the device and are passed from one accelerator to the next, thereby avoiding unnecessary data movement between the host and the device</p></li>
<li><p>Pipelines with software filters: when using the ouput of the decoder or the scaler with a FFmpeg software filter, the video frames are automatically copied back to the host, as long as the software filter performs frame cloning. Examples of such filters include <code class="docutils literal notranslate"><span class="pre">fps</span></code> and <code class="docutils literal notranslate"><span class="pre">split</span></code>.</p></li>
</ul>
</div>
<div class="section" id="explicit-data-movement">
<h3>Explicit Data Movement<a class="headerlink" href="#explicit-data-movement" title="Permalink to this headline">¶</a></h3>
<p>It is necessary to explicitly copy video frames from the device to the host in these situations:</p>
<ul class="simple">
<li><p>Writing the output of the decoder or the scaler to file.</p></li>
<li><p>Using the output of the decoder or the scaler with a software filter which does not perform frame cloning. Examples of such filters include the <code class="docutils literal notranslate"><span class="pre">transpose</span></code> filter used for frame rotation.</p></li>
</ul>
<p>This is done using the <a class="reference internal" href="#cmdoption-arg-xvbm_convert"><code class="xref std std-option docutils literal notranslate"><span class="pre">xvbm_convert</span></code></a> filter.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-xvbm_convert">
<span id="cmdoption-arg-xvbm-convert"></span><span class="sig-name descname"><span class="pre">xvbm_convert</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-xvbm_convert" title="Permalink to this definition">¶</a></dt>
<dd><p>FFmpeg filter which converts and copies a XVBM frame on the device to an AV frame on the host</p>
</dd></dl>

<p>Examples using the <a class="reference internal" href="#cmdoption-arg-xvbm_convert"><code class="xref std std-option docutils literal notranslate"><span class="pre">xvbm_convert</span></code></a> filter can be found here:</p>
<ul class="simple">
<li><p>FFmpeg tutorials <a class="reference internal" href="examples/ffmpeg/tutorials.html#decode-only"><span class="std std-ref">Decode Only</span></a> and <a class="reference internal" href="examples/ffmpeg/tutorials.html#decode-and-scale-only"><span class="std std-ref">Decode Only Into Multiple-Resolution Outputs</span></a></p></li>
<li><p>FFmpeg examples with <a class="reference internal" href="examples/ffmpeg/filters.html"><span class="doc">Software Filters</span></a></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="rebuilding-ffmpeg">
<span id="rebuild-ffmpeg"></span><h2><a class="toc-backref" href="#id7">Rebuilding FFmpeg</a><a class="headerlink" href="#rebuilding-ffmpeg" title="Permalink to this headline">¶</a></h2>
<p>There are two methods for rebuilding FFmpeg with the Xilinx Video SDK plugins enabled:</p>
<ul class="simple">
<li><p>Using the complete source code</p></li>
<li><p>Using the git patch file</p></li>
</ul>
<div class="section" id="using-the-source-code">
<h3>Using the Source Code<a class="headerlink" href="#using-the-source-code" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://github.com/Xilinx/app-ffmpeg4-xma/tree/49ceb9d7defdef4c8fb62fe6d373a2a1c07d7497">sources/app-ffmpeg4-xma</a> submodule contains the entire source code for the FFmpeg executable included with the Video SDK. This is a fork of the main FFmpeg GitHub (release 4.1, commid ID bb01cd3cc01c9982e4b57f8ce5cfd6ec4724f848) with a <a class="reference external" href="https://github.com/Xilinx/video-sdk/tree/v1.0/sources/app-ffmpeg4-xma-patch">Xilinx patch applied</a> to enable the Xilinx Video SDK plugins. Due to licensing restrictions, the FFmpeg executable included in the Video SDK is enabled with the Xilinx Video SDK plugins only.</p>
<p>You can rebuild the FFmpeg executable with optional plugins by following the instructions below. Additionally, comprehensive instructions for compiling FFmpeg can be found <a class="reference external" href="https://trac.ffmpeg.org/wiki/CompilationGuide">on the FFmpeg wiki page</a>.</p>
<ol class="arabic">
<li><p>Make sure <code class="docutils literal notranslate"><span class="pre">nasm</span></code> and <code class="docutils literal notranslate"><span class="pre">yasm</span></code> are installed on your machine.</p></li>
<li><p>Navigate the top of the Xilinx Video SDK repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">video</span><span class="o">-</span><span class="n">sdk</span>
</pre></div>
</div>
</li>
<li><p>Make sure the sources have been downloaded from the repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodule</span> <span class="n">update</span> <span class="o">--</span><span class="n">init</span> <span class="o">--</span><span class="n">recursive</span>
</pre></div>
</div>
</li>
<li><p>Navigate to the directory containing the FFmpeg sources:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sources</span><span class="o">/</span><span class="n">app</span><span class="o">-</span><span class="n">ffmpeg4</span><span class="o">-</span><span class="n">xma</span>
</pre></div>
</div>
</li>
<li><p>Optionally install FFmpeg plugins you wish to enable (either from source or from your package manager like <code class="docutils literal notranslate"><span class="pre">yum</span></code> or <code class="docutils literal notranslate"><span class="pre">apt</span></code>). For example: libx264, or libx265.</p></li>
<li><p>Configure FFmpeg with <code class="docutils literal notranslate"><span class="pre">--enable</span></code> flags to enable the desired plugins. The <code class="docutils literal notranslate"><span class="pre">-enable-libxma2api</span></code> flag enables the U30 plugins. The command below will configure the Makefile to install the custom FFmpeg in the <code class="file docutils literal notranslate"><span class="pre">/tmp/ffmpeg</span></code> directory. To install in another location, modify the <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> and <code class="docutils literal notranslate"><span class="pre">--datadir</span></code> options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ffmpeg</span> <span class="o">--</span><span class="n">datadir</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ffmpeg</span><span class="o">/</span><span class="n">etc</span>  <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">x86asm</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">libxma2api</span> <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">doc</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">libxvbm</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">libxrm</span> <span class="o">--</span><span class="n">extra</span><span class="o">-</span><span class="n">cflags</span><span class="o">=-</span><span class="n">I</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">xilinx</span><span class="o">/</span><span class="n">xrt</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">xma2</span> <span class="o">--</span><span class="n">extra</span><span class="o">-</span><span class="n">ldflags</span><span class="o">=-</span><span class="n">L</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">xilinx</span><span class="o">/</span><span class="n">xrt</span><span class="o">/</span><span class="n">lib</span> <span class="o">--</span><span class="n">extra</span><span class="o">-</span><span class="n">libs</span><span class="o">=-</span><span class="n">lxma2api</span> <span class="o">--</span><span class="n">extra</span><span class="o">-</span><span class="n">libs</span><span class="o">=-</span><span class="n">lxrt_core</span> <span class="o">--</span><span class="n">extra</span><span class="o">-</span><span class="n">libs</span><span class="o">=-</span><span class="n">lxrt_coreutil</span> <span class="o">--</span><span class="n">extra</span><span class="o">-</span><span class="n">libs</span><span class="o">=-</span><span class="n">lpthread</span> <span class="o">--</span><span class="n">extra</span><span class="o">-</span><span class="n">libs</span><span class="o">=-</span><span class="n">ldl</span> <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">static</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">shared</span>
</pre></div>
</div>
</li>
<li><p>Build and install the FFmpeg executable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">-</span><span class="n">j</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>The <code class="file docutils literal notranslate"><span class="pre">/opt/xilinx/xcdr/setup.sh</span></code> script puts the Xilinx-provided FFmpeg in the <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> environment variable. To use the newly built FFmpeg, update your <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> or provide the full path to the custom-built executable.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="using-the-git-patch-file">
<h3>Using the Git Patch File<a class="headerlink" href="#using-the-git-patch-file" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://github.com/Xilinx/video-sdk/tree/v1.0/sources/app-ffmpeg4-xma-patch">Xilinx patch applied</a> folder contains a git patch file which can be applied to a FFmpeg fork to enable the Xilinx Video SDK plugins.</p>
<p>This patch is designed to apply to FFmpeg n4.1. As such, applying this patch to earlier or later versions of FFmpeg may require edits to successfully merge these changes and represent untested configurations.</p>
<p>The patch adds new plugins to FFmpeg to enable access to Xilinx U30 Video accelerators.  In addition, the patch makes edits to FFmpeg to support new command line options to support U30-based FPGA use cases as well as ensure proper initialization of Xilinx accelerators.</p>
<p>Here is an example of how the patch can be applied to a FFmpeg fork:</p>
<ol class="arabic">
<li><p>Clone the n4.1 version of FFmpeg:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">FFmpeg</span><span class="o">/</span><span class="n">FFmpeg</span><span class="o">.</span><span class="n">git</span> <span class="o">-</span><span class="n">b</span> <span class="n">n4</span><span class="mf">.1</span>
</pre></div>
</div>
</li>
<li><p>After the git clone, you will have a directory named FFmpeg. Enter this directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">FFmpeg</span>
</pre></div>
</div>
</li>
<li><p>Copy the patch file into the FFmpeg directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">app</span><span class="o">-</span><span class="n">ffmpeg4</span><span class="o">-</span><span class="n">xma</span><span class="o">-</span><span class="n">patch</span><span class="o">/</span><span class="mi">0001</span><span class="o">-</span><span class="n">Add</span><span class="o">-</span><span class="n">plugins</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">support</span><span class="o">-</span><span class="n">U30</span><span class="o">-</span><span class="n">based</span><span class="o">-</span><span class="n">Video</span><span class="o">-</span><span class="n">SDK</span><span class="o">-</span><span class="n">v1</span><span class="mf">.0.0</span><span class="o">.</span><span class="n">patch</span> <span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>Apply the patch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">am</span> <span class="mi">0001</span><span class="o">-</span><span class="n">Add</span><span class="o">-</span><span class="n">plugins</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">support</span><span class="o">-</span><span class="n">U30</span><span class="o">-</span><span class="n">based</span><span class="o">-</span><span class="n">Video</span><span class="o">-</span><span class="n">SDK</span><span class="o">-</span><span class="n">v1</span><span class="mf">.0.0</span><span class="o">.</span><span class="n">patch</span> <span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">whitespace</span> <span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">space</span><span class="o">-</span><span class="n">change</span>
</pre></div>
</div>
</li>
<li><p>You can then install additional FFmpeg plugins and proceed with the FFmpeg build and installation process.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="xilinx-ffmpeg-reference-guide">
<h2><a class="toc-backref" href="#id8">Xilinx FFmpeg Reference Guide</a><a class="headerlink" href="#xilinx-ffmpeg-reference-guide" title="Permalink to this headline">¶</a></h2>
<div class="section" id="h-264-codec-reference">
<h3>H.264 Codec Reference<a class="headerlink" href="#h-264-codec-reference" title="Permalink to this headline">¶</a></h3>
<div class="section" id="h-264-decoder-options">
<h4>H.264 Decoder Options<a class="headerlink" href="#h-264-decoder-options" title="Permalink to this headline">¶</a></h4>
<p>The entire list options for the Alveo U30 H.264 decoder (mpsoc_vcu_h264) can be displayed using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">h</span> <span class="n">decoder</span><span class="o">=</span><span class="n">mpsoc_vcu_h264</span>
</pre></div>
</div>
<p>The mpsoc_vcu_h264 decoder has the following options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Decoder</span> <span class="n">mpsoc_vcu_h264</span> <span class="p">[</span><span class="n">MPSOC</span> <span class="n">H</span><span class="mf">.264</span> <span class="n">Decoder</span><span class="p">]:</span>
    <span class="n">General</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">delay</span> <span class="n">avoidprobe</span>
    <span class="n">Threading</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">none</span>
    <span class="n">Supported</span> <span class="n">pixel</span> <span class="n">formats</span><span class="p">:</span> <span class="n">xlnx_xvbm</span>
<span class="n">MPSOC</span> <span class="n">H</span><span class="mf">.264</span> <span class="n">decoder</span> <span class="n">AVOptions</span><span class="p">:</span>
  <span class="o">-</span><span class="n">low_latency</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="n">V</span><span class="o">.....</span> <span class="n">Should</span> <span class="n">low</span> <span class="n">latency</span> <span class="n">decoding</span> <span class="n">be</span> <span class="n">used</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="n">entropy_buffers_count</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="n">V</span><span class="o">.....</span> <span class="n">Specify</span> <span class="n">number</span> <span class="n">of</span> <span class="n">internal</span> <span class="n">entropy</span> <span class="n">buffers</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">10</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">2</span><span class="p">)</span>
  <span class="o">-</span><span class="n">latency_logging</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="n">V</span><span class="o">.....</span> <span class="n">Log</span> <span class="n">latency</span> <span class="n">information</span> <span class="n">to</span> <span class="n">syslog</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="n">splitbuff_mode</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="n">V</span><span class="o">.....</span> <span class="n">configure</span> <span class="n">decoder</span> <span class="ow">in</span> <span class="n">split</span><span class="o">/</span><span class="n">unsplit</span> <span class="nb">input</span> <span class="n">buffer</span> <span class="n">mode</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="h-264-encoder-options">
<h4>H.264 Encoder Options<a class="headerlink" href="#h-264-encoder-options" title="Permalink to this headline">¶</a></h4>
<p>The entire list options for the Alveo U30 H.264 encoder (mpsoc_vcu_h264) can be displayed using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">h</span> <span class="n">encoder</span><span class="o">=</span><span class="n">mpsoc_vcu_h264</span>
</pre></div>
</div>
<p>The mpsoc_vcu_h264 encoder has the following options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Encoder</span> <span class="n">mpsoc_vcu_h264</span> <span class="p">[</span><span class="n">MPSOC</span> <span class="n">H</span><span class="mf">.264</span> <span class="n">Encoder</span><span class="p">]:</span>
    <span class="n">General</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">delay</span> <span class="n">threads</span>
    <span class="n">Threading</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">auto</span>
    <span class="n">Supported</span> <span class="n">pixel</span> <span class="n">formats</span><span class="p">:</span> <span class="n">xlnx_xvbm</span> <span class="n">nv12</span>
<span class="n">MPSOC</span> <span class="n">VCU</span> <span class="n">H264</span> <span class="n">encoder</span> <span class="n">AVOptions</span><span class="p">:</span>
  <span class="o">-</span><span class="n">control</span><span class="o">-</span><span class="n">rate</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Rate</span> <span class="n">Control</span> <span class="n">Mode</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">cbr</span><span class="p">)</span>
     <span class="n">const</span><span class="o">-</span><span class="n">qp</span>                     <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Constant</span> <span class="n">QP</span>
     <span class="n">cbr</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Constant</span> <span class="n">Bitrate</span>
     <span class="n">vbr</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Variable</span> <span class="n">Bitrate</span>
     <span class="n">low</span><span class="o">-</span><span class="n">latency</span>                  <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Low</span> <span class="n">Latency</span>
  <span class="o">-</span><span class="nb">max</span><span class="o">-</span><span class="n">bitrate</span>       <span class="o">&lt;</span><span class="n">int64</span><span class="o">&gt;</span>      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Maximum</span> <span class="n">Bit</span> <span class="n">Rate</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mf">3.5e+10</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mf">5e+06</span><span class="p">)</span>
  <span class="o">-</span><span class="nb">slice</span><span class="o">-</span><span class="n">qp</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Slice</span> <span class="n">QP</span> <span class="p">(</span><span class="kn">from</span> <span class="o">-</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">51</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">auto</span><span class="p">)</span>
     <span class="n">auto</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Auto</span>
  <span class="o">-</span><span class="nb">min</span><span class="o">-</span><span class="n">qp</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Minimum</span> <span class="n">QP</span> <span class="n">value</span> <span class="n">allowed</span> <span class="k">for</span> <span class="n">the</span> <span class="n">rate</span> <span class="n">control</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">51</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="nb">max</span><span class="o">-</span><span class="n">qp</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Maximum</span> <span class="n">QP</span> <span class="n">value</span> <span class="n">allowed</span> <span class="k">for</span> <span class="n">the</span> <span class="n">rate</span> <span class="n">control</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">51</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">51</span><span class="p">)</span>
  <span class="o">-</span><span class="n">bf</span>                <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">B</span><span class="o">-</span><span class="n">frames</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="n">UINT32_MAX</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">2</span><span class="p">)</span>
  <span class="o">-</span><span class="n">periodicity</span><span class="o">-</span><span class="n">idr</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">IDR</span> <span class="n">Picture</span> <span class="n">Frequency</span> <span class="p">(</span><span class="kn">from</span> <span class="o">-</span><span class="mi">1</span> <span class="n">to</span> <span class="n">UINT32_MAX</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
  <span class="o">-</span><span class="n">profile</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">encoding</span> <span class="n">profile</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">66</span> <span class="n">to</span> <span class="mi">100</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">high</span><span class="p">)</span>
     <span class="n">baseline</span>                     <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Baseline</span> <span class="n">profile</span>
     <span class="n">main</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Main</span> <span class="n">profile</span>
     <span class="n">high</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">High</span> <span class="n">profile</span>
  <span class="o">-</span><span class="n">level</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">encoding</span> <span class="n">level</span> <span class="n">restriction</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">10</span> <span class="n">to</span> <span class="mi">52</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1</span><span class="p">)</span>
     <span class="mi">1</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">1</span> <span class="n">level</span>
     <span class="mf">1.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">1.1</span> <span class="n">level</span>
     <span class="mf">1.2</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">1.2</span> <span class="n">level</span>
     <span class="mf">1.3</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">1.3</span> <span class="n">level</span>
     <span class="mi">2</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">2</span> <span class="n">level</span>
     <span class="mf">2.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">2.1</span> <span class="n">level</span>
     <span class="mf">2.2</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">2.2</span> <span class="n">level</span>
     <span class="mi">3</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">3</span> <span class="n">level</span>
     <span class="mf">3.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">3.1</span> <span class="n">level</span>
     <span class="mf">3.2</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">3.2</span> <span class="n">level</span>
     <span class="mi">4</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">4</span> <span class="n">level</span>
     <span class="mf">4.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">4.1</span> <span class="n">level</span>
     <span class="mf">4.2</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">4.2</span> <span class="n">level</span>
     <span class="mi">5</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">5</span> <span class="n">level</span>
     <span class="mf">5.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">5.1</span> <span class="n">level</span>
     <span class="mf">5.2</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">5.2</span> <span class="n">level</span>
  <span class="o">-</span><span class="n">slices</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Slices</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">68</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1</span><span class="p">)</span>
  <span class="o">-</span><span class="n">qp</span><span class="o">-</span><span class="n">mode</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">QP</span> <span class="n">Control</span> <span class="n">Mode</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">auto</span><span class="p">)</span>
     <span class="n">uniform</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">same</span> <span class="n">QP</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">coding</span> <span class="n">units</span> <span class="n">of</span> <span class="n">the</span> <span class="n">frame</span>
     <span class="n">auto</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Let</span> <span class="n">the</span> <span class="n">VCU</span> <span class="n">encoder</span> <span class="n">change</span> <span class="n">the</span> <span class="n">QP</span> <span class="k">for</span> <span class="n">each</span> <span class="n">coding</span> <span class="n">unit</span> <span class="n">according</span> <span class="n">to</span> <span class="n">its</span> <span class="n">content</span>
     <span class="n">relative</span><span class="o">-</span><span class="n">load</span>                <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">information</span> <span class="n">gathered</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">lookahead</span> <span class="n">to</span> <span class="n">calculate</span> <span class="n">the</span> <span class="n">best</span> <span class="n">QP</span>
  <span class="o">-</span><span class="n">aspect</span><span class="o">-</span><span class="n">ratio</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Aspect</span><span class="o">-</span><span class="n">Ratio</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">auto</span><span class="p">)</span>
     <span class="n">auto</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">4</span><span class="p">:</span><span class="mi">3</span> <span class="k">for</span> <span class="n">SD</span> <span class="n">video</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span><span class="mi">9</span> <span class="k">for</span> <span class="n">HD</span> <span class="n">video</span><span class="p">,</span> <span class="n">unspecified</span> <span class="k">for</span> <span class="n">unknown</span> <span class="nb">format</span>
     <span class="mi">4</span><span class="p">:</span><span class="mi">3</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">4</span><span class="p">:</span><span class="mi">3</span> <span class="n">aspect</span> <span class="n">ratio</span>
     <span class="mi">16</span><span class="p">:</span><span class="mi">9</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">16</span><span class="p">:</span><span class="mi">9</span> <span class="n">aspect</span> <span class="n">ratio</span>
     <span class="n">none</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Aspect</span> <span class="n">ratio</span> <span class="n">information</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">present</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">stream</span>
  <span class="o">-</span><span class="n">scaling</span><span class="o">-</span><span class="nb">list</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Scaling</span> <span class="n">List</span> <span class="n">Mode</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">default</span><span class="p">)</span>
     <span class="n">flat</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Flat</span> <span class="n">scaling</span> <span class="nb">list</span> <span class="n">mode</span>
     <span class="n">default</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Default</span> <span class="n">scaling</span> <span class="nb">list</span> <span class="n">mode</span>
  <span class="o">-</span><span class="n">cores</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">cores</span> <span class="n">to</span> <span class="n">use</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">auto</span><span class="p">)</span>
     <span class="n">auto</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Automatic</span>
  <span class="o">-</span><span class="n">lookahead_depth</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">frames</span> <span class="n">to</span> <span class="n">lookahead</span> <span class="k">for</span> <span class="n">qp</span> <span class="n">maps</span> <span class="n">generation</span> <span class="ow">or</span> <span class="n">custom</span> <span class="n">rate</span> <span class="n">control</span><span class="o">.</span> <span class="n">Up</span> <span class="n">to</span> <span class="mi">20</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">20</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="n">temporal</span><span class="o">-</span><span class="n">aq</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">Temporal</span> <span class="n">AQ</span><span class="o">.</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">enable</span><span class="p">)</span>
     <span class="n">disable</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Disable</span> <span class="n">Temporal</span> <span class="n">AQ</span>
     <span class="n">enable</span>                       <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">Temporal</span> <span class="n">AQ</span>
  <span class="o">-</span><span class="n">spatial</span><span class="o">-</span><span class="n">aq</span>        <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">Spatial</span> <span class="n">AQ</span><span class="o">.</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">enable</span><span class="p">)</span>
     <span class="n">disable</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Disable</span> <span class="n">Spatial</span> <span class="n">AQ</span>
     <span class="n">enable</span>                       <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">Spatial</span> <span class="n">AQ</span>
  <span class="o">-</span><span class="n">spatial</span><span class="o">-</span><span class="n">aq</span><span class="o">-</span><span class="n">gain</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Percentage</span> <span class="n">of</span> <span class="n">spatial</span> <span class="n">AQ</span> <span class="n">gain</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">100</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">50</span><span class="p">)</span>
  <span class="o">-</span><span class="n">latency_logging</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Log</span> <span class="n">latency</span> <span class="n">information</span> <span class="n">to</span> <span class="n">syslog</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="n">expert</span><span class="o">-</span><span class="n">options</span>    <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Expert</span> <span class="n">options</span> <span class="k">for</span> <span class="n">MPSoC</span> <span class="n">H</span><span class="mf">.264</span> <span class="n">Encoder</span>
  <span class="o">-</span><span class="n">tune</span><span class="o">-</span><span class="n">metrics</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Tunes</span> <span class="n">MPSoC</span> <span class="n">H</span><span class="mf">.264</span> <span class="n">Encoder</span><span class="s1">&#39;s video quality for objective metrics (from 0 to 1) (default disable)</span>
     <span class="n">disable</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Disable</span> <span class="n">tune</span> <span class="n">metrics</span>
     <span class="n">enable</span>                       <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">tune</span> <span class="n">metrics</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hevc-codec-reference">
<h3>HEVC Codec Reference<a class="headerlink" href="#hevc-codec-reference" title="Permalink to this headline">¶</a></h3>
<div class="section" id="hevc-decoder-options">
<h4>HEVC Decoder Options<a class="headerlink" href="#hevc-decoder-options" title="Permalink to this headline">¶</a></h4>
<p>The entire list options for the Alveo U30 HEVC decoder (mpsoc_vcu_hevc) can be displayed using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">h</span> <span class="n">decoder</span><span class="o">=</span><span class="n">mpsoc_vcu_hevc</span>
</pre></div>
</div>
<p>The mpsoc_vcu_hevc decoder has the following options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Decoder</span> <span class="n">mpsoc_vcu_hevc</span> <span class="p">[</span><span class="n">MPSOC</span> <span class="n">HEVC</span> <span class="n">Decoder</span><span class="p">]:</span>
    <span class="n">General</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">delay</span> <span class="n">avoidprobe</span>
    <span class="n">Threading</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">none</span>
    <span class="n">Supported</span> <span class="n">pixel</span> <span class="n">formats</span><span class="p">:</span> <span class="n">xlnx_xvbm</span>
<span class="n">MPSOC</span> <span class="n">HEVC</span> <span class="n">decoder</span> <span class="n">AVOptions</span><span class="p">:</span>
  <span class="o">-</span><span class="n">low_latency</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="n">V</span><span class="o">.....</span> <span class="n">Should</span> <span class="n">low</span> <span class="n">latency</span> <span class="n">decoding</span> <span class="n">be</span> <span class="n">used</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="n">entropy_buffers_count</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="n">V</span><span class="o">.....</span> <span class="n">Specify</span> <span class="n">number</span> <span class="n">of</span> <span class="n">internal</span> <span class="n">entropy</span> <span class="n">buffers</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">2</span> <span class="n">to</span> <span class="mi">10</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">2</span><span class="p">)</span>
  <span class="o">-</span><span class="n">latency_logging</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="n">V</span><span class="o">.....</span> <span class="n">Log</span> <span class="n">latency</span> <span class="n">information</span> <span class="n">to</span> <span class="n">syslog</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="n">splitbuff_mode</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="n">V</span><span class="o">.....</span> <span class="n">configure</span> <span class="n">decoder</span> <span class="ow">in</span> <span class="n">split</span><span class="o">/</span><span class="n">unsplit</span> <span class="nb">input</span> <span class="n">buffer</span> <span class="n">mode</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="hevc-encoder-options">
<h4>HEVC Encoder Options<a class="headerlink" href="#hevc-encoder-options" title="Permalink to this headline">¶</a></h4>
<p>The entire list options for the Alveo U30 HEVC encoder (mpsoc_vcu_hevc) can be displayed using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">h</span> <span class="n">encoder</span><span class="o">=</span><span class="n">mpsoc_vcu_hevc</span>
</pre></div>
</div>
<p>The mpoc_vcu_hevc encoder has the following options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Encoder</span> <span class="n">mpsoc_vcu_hevc</span> <span class="p">[</span><span class="n">MPSOC</span> <span class="n">VCU</span> <span class="n">HEVC</span> <span class="n">Encoder</span><span class="p">]:</span>
    <span class="n">General</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">delay</span> <span class="n">threads</span> <span class="n">avoidprobe</span>
    <span class="n">Threading</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">auto</span>
    <span class="n">Supported</span> <span class="n">pixel</span> <span class="n">formats</span><span class="p">:</span> <span class="n">xlnx_xvbm</span> <span class="n">nv12</span>
<span class="n">MPSOC</span> <span class="n">VCU</span> <span class="n">HEVC</span> <span class="n">encoder</span> <span class="n">AVOptions</span><span class="p">:</span>
  <span class="o">-</span><span class="n">control</span><span class="o">-</span><span class="n">rate</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Rate</span> <span class="n">Control</span> <span class="n">Mode</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">cbr</span><span class="p">)</span>
     <span class="n">const</span><span class="o">-</span><span class="n">qp</span>                     <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Constant</span> <span class="n">QP</span>
     <span class="n">cbr</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Constant</span> <span class="n">Bitrate</span>
     <span class="n">vbr</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Variable</span> <span class="n">Bitrate</span>
     <span class="n">low</span><span class="o">-</span><span class="n">latency</span>                  <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Low</span> <span class="n">Latency</span>
  <span class="o">-</span><span class="nb">max</span><span class="o">-</span><span class="n">bitrate</span>       <span class="o">&lt;</span><span class="n">int64</span><span class="o">&gt;</span>      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Maximum</span> <span class="n">Bit</span> <span class="n">Rate</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mf">3.5e+10</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mf">5e+06</span><span class="p">)</span>
  <span class="o">-</span><span class="nb">slice</span><span class="o">-</span><span class="n">qp</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Slice</span> <span class="n">QP</span> <span class="p">(</span><span class="kn">from</span> <span class="o">-</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">51</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">auto</span><span class="p">)</span>
     <span class="n">auto</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Auto</span>
  <span class="o">-</span><span class="nb">min</span><span class="o">-</span><span class="n">qp</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Minimum</span> <span class="n">QP</span> <span class="n">value</span> <span class="n">allowed</span> <span class="k">for</span> <span class="n">the</span> <span class="n">rate</span> <span class="n">control</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">51</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="nb">max</span><span class="o">-</span><span class="n">qp</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Maximum</span> <span class="n">QP</span> <span class="n">value</span> <span class="n">allowed</span> <span class="k">for</span> <span class="n">the</span> <span class="n">rate</span> <span class="n">control</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">51</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">51</span><span class="p">)</span>
  <span class="o">-</span><span class="n">bf</span>                <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">B</span><span class="o">-</span><span class="n">frames</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="n">UINT32_MAX</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">2</span><span class="p">)</span>
  <span class="o">-</span><span class="n">periodicity</span><span class="o">-</span><span class="n">idr</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">IDR</span> <span class="n">Picture</span> <span class="n">Frequency</span> <span class="p">(</span><span class="kn">from</span> <span class="o">-</span><span class="mi">1</span> <span class="n">to</span> <span class="n">UINT32_MAX</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
  <span class="o">-</span><span class="n">profile</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">encoding</span> <span class="n">profile</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">main</span><span class="p">)</span>
     <span class="n">main</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Main</span> <span class="n">profile</span>
     <span class="n">main</span><span class="o">-</span><span class="n">intra</span>                   <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Main</span> <span class="n">Intra</span> <span class="n">profile</span>
  <span class="o">-</span><span class="n">level</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">encoding</span> <span class="n">level</span> <span class="n">restriction</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">10</span> <span class="n">to</span> <span class="mi">51</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1</span><span class="p">)</span>
     <span class="mi">1</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">1</span> <span class="n">level</span>
     <span class="mi">2</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">2</span> <span class="n">level</span>
     <span class="mf">2.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">2.1</span> <span class="n">level</span>
     <span class="mi">3</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">3</span> <span class="n">level</span>
     <span class="mf">3.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">3.1</span> <span class="n">level</span>
     <span class="mi">4</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">4</span> <span class="n">level</span>
     <span class="mf">4.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">4.1</span> <span class="n">level</span>
     <span class="mi">5</span>                            <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">5</span> <span class="n">level</span>
     <span class="mf">5.1</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mf">5.1</span> <span class="n">level</span>
  <span class="o">-</span><span class="n">tier</span>              <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">encoding</span> <span class="n">tier</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">main</span><span class="p">)</span>
     <span class="n">main</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Main</span> <span class="n">tier</span>
     <span class="n">high</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">High</span> <span class="n">tier</span>
  <span class="o">-</span><span class="n">slices</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Slices</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">68</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1</span><span class="p">)</span>
  <span class="o">-</span><span class="n">qp</span><span class="o">-</span><span class="n">mode</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">QP</span> <span class="n">Control</span> <span class="n">Mode</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">auto</span><span class="p">)</span>
     <span class="n">uniform</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">same</span> <span class="n">QP</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">coding</span> <span class="n">units</span> <span class="n">of</span> <span class="n">the</span> <span class="n">frame</span>
     <span class="n">auto</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Let</span> <span class="n">the</span> <span class="n">VCU</span> <span class="n">encoder</span> <span class="n">change</span> <span class="n">the</span> <span class="n">QP</span> <span class="k">for</span> <span class="n">each</span> <span class="n">coding</span> <span class="n">unit</span> <span class="n">according</span> <span class="n">to</span> <span class="n">its</span> <span class="n">content</span>
     <span class="n">relative</span><span class="o">-</span><span class="n">load</span>                <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">information</span> <span class="n">gathered</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">lookahead</span> <span class="n">to</span> <span class="n">calculate</span> <span class="n">the</span> <span class="n">best</span> <span class="n">QP</span>
  <span class="o">-</span><span class="n">aspect</span><span class="o">-</span><span class="n">ratio</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Aspect</span><span class="o">-</span><span class="n">Ratio</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">auto</span><span class="p">)</span>
     <span class="n">auto</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">4</span><span class="p">:</span><span class="mi">3</span> <span class="k">for</span> <span class="n">SD</span> <span class="n">video</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span><span class="mi">9</span> <span class="k">for</span> <span class="n">HD</span> <span class="n">video</span><span class="p">,</span> <span class="n">unspecified</span> <span class="k">for</span> <span class="n">unknown</span> <span class="nb">format</span>
     <span class="mi">4</span><span class="p">:</span><span class="mi">3</span>                          <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">4</span><span class="p">:</span><span class="mi">3</span> <span class="n">aspect</span> <span class="n">ratio</span>
     <span class="mi">16</span><span class="p">:</span><span class="mi">9</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="mi">16</span><span class="p">:</span><span class="mi">9</span> <span class="n">aspect</span> <span class="n">ratio</span>
     <span class="n">none</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Aspect</span> <span class="n">ratio</span> <span class="n">information</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">present</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">stream</span>
  <span class="o">-</span><span class="n">scaling</span><span class="o">-</span><span class="nb">list</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Scaling</span> <span class="n">List</span> <span class="n">Mode</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">default</span><span class="p">)</span>
     <span class="n">flat</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Flat</span> <span class="n">scaling</span> <span class="nb">list</span> <span class="n">mode</span>
     <span class="n">default</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Default</span> <span class="n">scaling</span> <span class="nb">list</span> <span class="n">mode</span>
  <span class="o">-</span><span class="n">cores</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">cores</span> <span class="n">to</span> <span class="n">use</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">auto</span><span class="p">)</span>
     <span class="n">auto</span>                         <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Automatic</span>
  <span class="o">-</span><span class="n">lookahead_depth</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">frames</span> <span class="n">to</span> <span class="n">lookahead</span> <span class="k">for</span> <span class="n">qp</span> <span class="n">maps</span> <span class="n">generation</span> <span class="ow">or</span> <span class="n">custom</span> <span class="n">rate</span> <span class="n">control</span><span class="o">.</span> <span class="n">Up</span> <span class="n">to</span> <span class="mi">20</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">20</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="n">temporal</span><span class="o">-</span><span class="n">aq</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">Temporal</span> <span class="n">AQ</span><span class="o">.</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">enable</span><span class="p">)</span>
     <span class="n">disable</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Disable</span> <span class="n">Temporal</span> <span class="n">AQ</span>
     <span class="n">enable</span>                       <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">Temporal</span> <span class="n">AQ</span>
  <span class="o">-</span><span class="n">spatial</span><span class="o">-</span><span class="n">aq</span>        <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">Spatial</span> <span class="n">AQ</span><span class="o">.</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="n">enable</span><span class="p">)</span>
     <span class="n">disable</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Disable</span> <span class="n">Spatial</span> <span class="n">AQ</span>
     <span class="n">enable</span>                       <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">Spatial</span> <span class="n">AQ</span>
  <span class="o">-</span><span class="n">spatial</span><span class="o">-</span><span class="n">aq</span><span class="o">-</span><span class="n">gain</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Percentage</span> <span class="n">of</span> <span class="n">spatial</span> <span class="n">AQ</span> <span class="n">gain</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">100</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">50</span><span class="p">)</span>
  <span class="o">-</span><span class="n">latency_logging</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Log</span> <span class="n">latency</span> <span class="n">information</span> <span class="n">to</span> <span class="n">syslog</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
  <span class="o">-</span><span class="n">expert</span><span class="o">-</span><span class="n">options</span>    <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Expert</span> <span class="n">options</span> <span class="k">for</span> <span class="n">MPSoC</span> <span class="n">HEVC</span> <span class="n">Encoder</span>
  <span class="o">-</span><span class="n">tune</span><span class="o">-</span><span class="n">metrics</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Tunes</span> <span class="n">MPSoC</span> <span class="n">HEVC</span> <span class="n">Encoder</span><span class="s1">&#39;s video quality for objective metrics (from 0 to 1) (default disable)</span>
     <span class="n">disable</span>                      <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Disable</span> <span class="n">tune</span> <span class="n">metrics</span>
     <span class="n">enable</span>                       <span class="n">E</span><span class="o">..</span><span class="n">V</span><span class="o">.....</span> <span class="n">Enable</span> <span class="n">tune</span> <span class="n">metrics</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="multiscaler-filter-reference">
<h3>Multiscaler Filter Reference<a class="headerlink" href="#multiscaler-filter-reference" title="Permalink to this headline">¶</a></h3>
<p>The entire list options for the Alveo U30 Multiscaler (multiscale_xma) can be displayed using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">h</span> <span class="nb">filter</span><span class="o">=</span><span class="n">multiscale_xma</span>
</pre></div>
</div>
<p>The multiple output hardware scaling filter has the following options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Filter</span> <span class="n">multiscale_xma</span>
  <span class="n">Xilinx</span> <span class="n">Multi</span> <span class="n">Scaler</span> <span class="p">(</span><span class="ow">in</span> <span class="n">ABR</span> <span class="n">mode</span><span class="p">)</span> <span class="n">using</span> <span class="n">XMA</span> <span class="n">APIs</span>
    <span class="n">Inputs</span><span class="p">:</span>
       <span class="c1">#0: default (video)</span>
    <span class="n">Outputs</span><span class="p">:</span>
        <span class="n">dynamic</span> <span class="p">(</span><span class="n">depending</span> <span class="n">on</span> <span class="n">the</span> <span class="n">options</span><span class="p">)</span>
<span class="n">multiscale_xma</span> <span class="n">AVOptions</span><span class="p">:</span>
  <span class="n">outputs</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">number</span> <span class="n">of</span> <span class="n">outputs</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">8</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">8</span><span class="p">)</span>
  <span class="n">out_1_width</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">width</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">1</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1600</span><span class="p">)</span>
  <span class="n">out_1_height</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">height</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">1</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">900</span><span class="p">)</span>
  <span class="n">out_1_pix_fmt</span>     <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">1</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;xlnx_xvbm&quot;</span><span class="p">)</span>
  <span class="n">out_1_rate</span>        <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">1</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
  <span class="n">out_2_width</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">width</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">2</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">1280</span><span class="p">)</span>
  <span class="n">out_2_height</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">height</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">2</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">720</span><span class="p">)</span>
  <span class="n">out_2_pix_fmt</span>     <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">2</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;xlnx_xvbm&quot;</span><span class="p">)</span>
  <span class="n">out_2_rate</span>        <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">2</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
  <span class="n">out_3_width</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">width</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">3</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">800</span><span class="p">)</span>
  <span class="n">out_3_height</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">height</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">3</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">600</span><span class="p">)</span>
  <span class="n">out_3_pix_fmt</span>     <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">3</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;xlnx_xvbm&quot;</span><span class="p">)</span>
  <span class="n">out_3_rate</span>        <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">3</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
  <span class="n">out_4_width</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">width</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">4</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">832</span><span class="p">)</span>
  <span class="n">out_4_height</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">height</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">4</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">480</span><span class="p">)</span>
  <span class="n">out_4_pix_fmt</span>     <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">4</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;xlnx_xvbm&quot;</span><span class="p">)</span>
  <span class="n">out_4_rate</span>        <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">4</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
  <span class="n">out_5_width</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">width</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">5</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">640</span><span class="p">)</span>
  <span class="n">out_5_height</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">height</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">5</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">480</span><span class="p">)</span>
  <span class="n">out_5_pix_fmt</span>     <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">5</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;xlnx_xvbm&quot;</span><span class="p">)</span>
  <span class="n">out_5_rate</span>        <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">5</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
  <span class="n">out_6_width</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">width</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">6</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">480</span><span class="p">)</span>
  <span class="n">out_6_height</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">height</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">6</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">320</span><span class="p">)</span>
  <span class="n">out_6_pix_fmt</span>     <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">6</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;xlnx_xvbm&quot;</span><span class="p">)</span>
  <span class="n">out_6_rate</span>        <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">6</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
  <span class="n">out_7_width</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">width</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">7</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">320</span><span class="p">)</span>
  <span class="n">out_7_height</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">height</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">7</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">240</span><span class="p">)</span>
  <span class="n">out_7_pix_fmt</span>     <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">7</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;xlnx_xvbm&quot;</span><span class="p">)</span>
  <span class="n">out_7_rate</span>        <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">7</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
  <span class="n">out_8_width</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">width</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">8</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">224</span><span class="p">)</span>
  <span class="n">out_8_height</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">height</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">8</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">128</span> <span class="n">to</span> <span class="mi">3840</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">224</span><span class="p">)</span>
  <span class="n">out_8_pix_fmt</span>     <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">8</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;xlnx_xvbm&quot;</span><span class="p">)</span>
  <span class="n">out_8_rate</span>        <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span>     <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="nb">set</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">output</span> <span class="mi">8</span> <span class="p">(</span><span class="n">default</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
  <span class="n">latency_logging</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>        <span class="o">..</span><span class="n">FV</span><span class="o">.....</span> <span class="n">Log</span> <span class="n">latency</span> <span class="n">information</span> <span class="n">to</span> <span class="n">syslog</span> <span class="p">(</span><span class="kn">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">default</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Specs and Features of the Xilinx Video SDK" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="running_multiple_jobs.html" class="btn btn-neutral float-right" title="Running Multiple FFmpeg Jobs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on June 20, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>